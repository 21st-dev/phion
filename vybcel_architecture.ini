sequenceDiagram
    participant U as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant B as üåê –ë—Ä–∞—É–∑–µ—Ä Next.js –ø–æ—Ä—Ç 3004
    participant V as üíª VSCode –∏–ª–∏ Cursor —Ä–µ–¥–∞–∫—Ç–æ—Ä
    participant TB as üõ†Ô∏è Vybcel Toolbar (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –ø—Ä–æ–µ–∫—Ç)
    participant W as üì° vybcel –∞–≥–µ–Ω—Ç —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ —Ñ–∞–π–ª–∞–º–∏
    participant WS as üîÑ WebSocket —Å–µ—Ä–≤–µ—Ä –ø–æ—Ä—Ç 8080
    participant R2 as ‚òÅÔ∏è Cloudflare R2 Storage (toolbar versions)
    participant CLI as üîß Deploy CLI Tool
    participant ADM as üë®‚Äçüíº Admin Interface
    participant DB as üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase PostgreSQL
    participant APP as ü§ñ Vybcel Bot GitHub App ID 1390062
    participant GH as üêô GitHub API –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è vybcel
    participant N as üî• –°–µ—Ä–≤–∏—Å –¥–µ–ø–ª–æ—è Netlify

    Note over U,N: üöÄ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê VYBCEL - GITHUB APP + SERVERLESS-SAFE + –ë–ï–ó –õ–û–ì–ò–ù–ê + –£–ú–ù–´–ô –û–ù–ë–û–†–î–ò–ù–ì + TOOLBAR AUTO-UPDATE

    %% === –ê. –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–Ø TOOLBAR ===
    rect rgb(255, 245, 255)
        Note over TB,R2: üõ†Ô∏è VYBCEL TOOLBAR AUTO-UPDATE SYSTEM - –≥–æ—Ä—è—á–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ npm
        
        Note over TB,R2: –ö–û–ú–ü–û–ù–ï–ù–¢–´ –°–ò–°–¢–ï–ú–´ –ê–í–¢–û–û–ë–ù–û–í–õ–ï–ù–ò–Ø
        Note right of TB: Vybcel Toolbar –≤—Å—Ç—Ä–æ–µ–Ω –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ vite-plugin-vybcel
        Note right of TB: –ê–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç + WebSocket push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        Note right of TB: –ì–æ—Ä—è—á–∞—è –∑–∞–º–µ–Ω–∞ –∫–æ–¥–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Hot Module Replacement)
        Note right of TB: –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–∞–Ω–∞–ª–∞–º–∏ stable/beta/dev –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ–ª–∏–∑–æ–≤
        Note right of TB: Graceful fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–±–ª–∞–∫–∞
        
        Note right of R2: Cloudflare R2 Storage —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –≤–µ—Ä—Å–∏–∏ toolbar —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
        Note right of R2: –í–µ—Ä—Å–∏–∏ —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ ZIP —Å checksums –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        Note right of R2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ /toolbar-versions/{version}/{channel}/toolbar.zip
        Note right of R2: Metadata —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç version releaseNotes forceUpdate flags
        
        Note right of CLI: Deploy CLI Tool –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        Note right of CLI: –ö–æ–º–∞–Ω–¥–∞ node scripts/deploy-toolbar.js --version 0.2.1 --channel stable --broadcast
        Note right of CLI: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π build + upload + push notification –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
        
        Note right of ADM: Admin Web Interface –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
        Note right of ADM: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        Note right of ADM: –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, WebSocket push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        
        alt –°–¶–ï–ù–ê–†–ò–ô 1 - –†–µ–≥—É–ª—è—Ä–Ω–∞—è –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            TB->>TB: setInterval –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            Note right of TB: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
            TB->>B: fetch /api/toolbar/check –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
            Note right of B: API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –≤ R2 storage
            
            B->>R2: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç metadata —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–Ω–∞–ª–∞ stable
            Note right of R2: –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
            R2-->>B: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç hasUpdate latestVersion forceUpdate flags
            
            B-->>TB: –û—Ç–≤–µ—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
            
            alt –ù–∞–π–¥–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                TB->>TB: –°–∫–∞—á–∏–≤–∞–µ—Ç –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                Note right of TB: Hot reload - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                TB->>TB: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "Toolbar updated to v0.2.1"
                Note right of TB: –ó–µ–ª–µ–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
            else –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ—Ç
                Note right of TB: –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π
            end
        end
        
        alt –°–¶–ï–ù–ê–†–ò–ô 2 - –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π push —á–µ—Ä–µ–∑ WebSocket
            CLI->>WS: POST /api/toolbar/broadcast-update –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            Note right of CLI: npm run deploy-toolbar --version 0.2.1 --broadcast
            
            WS->>WS: io.emit('toolbar_update_available') –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º
            Note right of WS: –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
            
            WS->>TB: WebSocket —Å–æ–±—ã—Ç–∏–µ toolbar_update_available
            Note right of TB: –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            
            TB->>TB: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            Note right of TB: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ - –Ω–µ –∂–¥–µ—Ç —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
            TB->>TB: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "Critical update applied"
            Note right of TB: –ö—Ä–∞—Å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        end
        
        alt –°–¶–ï–ù–ê–†–ò–ô 3 - –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
            U->>V: –ù–∞–∂–∏–º–∞–µ—Ç Cmd/Ctrl+Shift+U –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
            Note right of V: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            
            V->>TB: –°–æ–±—ã—Ç–∏–µ keydown –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è toolbar
            TB->>TB: checkForUpdates(force: true) –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
            
            TB->>B: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            B->>R2: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –≤ R2 storage
            R2-->>B: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ—Ä—Å–∏—è—Ö
            B-->>TB: –û—Ç–≤–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
            
            TB->>TB: –ü—Ä–∏–º–µ–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            Note right of TB: "No updates available" –∏–ª–∏ "Updated to v0.2.1"
        end
        
        alt –°–¶–ï–ù–ê–†–ò–ô 4 - –î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Admin Interface
            U->>ADM: –ó–∞—Ö–æ–¥–∏—Ç –Ω–∞ /admin/toolbar –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
            Note right of ADM: –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
            
            ADM->>ADM: –ó–∞–≥—Ä—É–∂–∞–µ—Ç ZIP —Ñ–∞–π–ª –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ toolbar
            Note right of ADM: Drag & drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
            
            ADM->>B: POST /api/toolbar/upload –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã
            B->>R2: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –≤ R2 storage
            R2->>R2: –°–æ–∑–¥–∞–µ—Ç ZIP –∞—Ä—Ö–∏–≤ —Å checksum validation
            R2-->>B: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
            
            ADM->>ADM: –í—ã–±–∏—Ä–∞–µ—Ç –∫–∞–Ω–∞–ª stable/beta/dev –∏ –Ω–∞–∂–∏–º–∞–µ—Ç Push Update
            ADM->>WS: POST /api/toolbar/push-update –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞
            
            WS->>TB: WebSocket —Å–æ–±—ã—Ç–∏–µ toolbar_update_available
            Note right of TB: –í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            TB->>TB: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
        end
        
        Note over TB,R2: –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ù–ê–î–ï–ñ–ù–û–°–¢–¨
        Note right of TB: Checksum validation –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        Note right of TB: Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏ —Å–±–æ—è—Ö –∑–∞–≥—Ä—É–∑–∫–∏
        Note right of TB: –ö–∞–Ω–∞–ª—ã stable/beta/dev –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        Note right of TB: –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ major.minor.patch
        Note right of TB: Rollback –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
    end

    %% === 0. –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê ===
    rect rgb(230, 230, 250)
        Note over APP,GH: 0Ô∏è‚É£ –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
        
        Note over APP: GitHub App "Vybcel Bot" ID 1390062 —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
        APP->>GH: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é vybcel —Å Installation ID 70719351
        Note right of APP: User access not required - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
        Note right of APP: –ü—Ä–∞–≤–∞ repo contents metadata webhooks
        
        Note over B: Backend —Ö—Ä–∞–Ω–∏—Ç private key GitHub App –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
        Note right of B: –ú–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å installation tokens –¥–µ–π—Å—Ç–≤—É—é—Ç 60 –º–∏–Ω—É—Ç
        Note right of B: GITHUB_APP_ID=1390062 GITHUB_APP_INSTALLATION_ID=70719351
        
        Note over U,N: üîë –ö–õ–Æ–ß–ï–í–ê–Ø –û–°–û–ë–ï–ù–ù–û–°–¢–¨ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ GitHub
    end

    %% === 1. –°–û–ó–î–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê ===
    rect rgb(240, 248, 255)
        Note over U,N: 1Ô∏è‚É£ –°–û–ó–î–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê - WebSocket —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
        U->>B: –ó–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É /dashboard –≤ –±—Ä–∞—É–∑–µ—Ä–µ
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "Create New Project"
        
        U->>B: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "Create New Project" —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
        Note right of B: POST /api/projects –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
        
        B->>DB: ProjectQueries.createProject —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ projects
        Note right of DB: INSERT INTO projects —Å user_id name template_type
        DB-->>B: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
        
        B->>WS: POST /api/projects/create-repository –≤—ã–∑—ã–≤–∞–µ—Ç WebSocket —Å–µ—Ä–≤–µ—Ä
        Note right of B: –ü–µ—Ä–µ–Ω–æ—Å–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ GitHub —Ä–µ–ø–æ –≤ Railway (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è serverless)
        Note right of B: Vercel serverless —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∑–∞—Å—ã–ø–∞—é—Ç –ø—Ä–∏ HTTP –∑–∞–ø—Ä–æ—Å–∞—Ö
        
        WS->>APP: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç installation token –¥–ª—è GitHub App ID 1390062
        Note right of APP: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT —Å private key –∏ –ø–æ–ª—É—á–∞–µ—Ç installation token
        APP->>APP: POST /app/installations/70719351/access_tokens —Å–æ–∑–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω
        APP-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç installation_token –¥–µ–π—Å—Ç–≤—É–µ—Ç 60 –º–∏–Ω—É—Ç
        
        WS->>GH: GitHub API POST /orgs/vybcel/repos —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        Note right of GH: –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π vybcel-project-{projectId}
        Note right of GH: Authorization Bearer {installation_token} + auto_init true
        GH->>GH: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å initial commit –∏ README –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ vybcel
        GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç github_repo_url clone_url –∏ repo details
        
        WS->>DB: ProjectQueries.updateGitHubInfo –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ GitHub
        Note right of DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç github_repo_url github_repo_name owner vybcel
        
        WS-->>B: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        Note right of B: –ü–æ–ª—É—á–∞–µ—Ç github_repo_url github_repo_name –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
        
        B->>DB: ProjectQueries.updateProject —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å pending
        Note right of DB: deploy_status = pending –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
        
        B->>WS: POST /api/projects/initialize –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —à–∞–±–ª–æ–Ω–∞
        Note right of B: –ü–µ—Ä–µ–Ω–æ—Å–∏–º –∑–∞–ª–∏–≤–∫—É —à–∞–±–ª–æ–Ω–∞ –≤ Railway (–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è serverless)
        Note right of B: WebSocket —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç initializeProjectInBackground –≤ —Ñ–æ–Ω–µ
        
        WS-->>B: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –æ –Ω–∞—á–∞–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        Note right of WS: Railway –Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç - —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
        
        B-->>U: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å—Ç–∞—Ç—É—Å pending downloadUrl
        Note right of U: –ü–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º pending + —Å—Å—ã–ª–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—É—é)
        Note right of U: –í—Å–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ Railway WebSocket —Å–µ—Ä–≤–µ—Ä
        
        par –§–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å initializeProjectInBackground –≤ Railway
            WS->>WS: generateTemplateFiles —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞
            Note right of WS: –ë–µ—Ä–µ—Ç —à–∞–±–ª–æ–Ω –∏–∑ –ø–∞–ø–∫–∏ templates/vite-react –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –µ–≥–æ
            WS->>WS: –ó–∞–º–µ–Ω—è–µ—Ç __PROJECT_ID__ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –≤ vybcel.config.json
            
            WS->>WS: import('./services/github.js') –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç GitHub —Å–µ—Ä–≤–∏—Å–∞
            Note right of WS: Railway –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π Node.js —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
            
            WS->>GH: GitHub API GET /repos/vybcel/repo/git/refs/heads/main –ø–æ–ª—É—á–∞–µ—Ç parent commit
            Note right of GH: –ü–æ–ª—É—á–∞–µ—Ç SHA –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
            GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç parent commit SHA –¥–ª—è tree API
            
            loop –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–∞–Ω–∫–∞–º–∏ –ø–æ 5 —à—Ç—É–∫
                WS->>GH: GitHub API POST /repos/vybcel/repo/git/blobs —Å–æ–∑–¥–∞–µ—Ç 5 blobs
                Note right of GH: –°–æ–∑–¥–∞–µ—Ç blob –æ–±—ä–µ–∫—Ç—ã –¥–ª—è —á–∞–Ω–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 100ms
                GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç SHA –¥–ª—è –∫–∞–∂–¥–æ–≥–æ blob –æ–±—ä–µ–∫—Ç–∞ –≤ —á–∞–Ω–∫–µ
            end
            
            WS->>GH: GitHub API POST /repos/vybcel/repo/git/trees —Å–æ–∑–¥–∞–µ—Ç tree —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏
            Note right of GH: –°–æ–∑–¥–∞–µ—Ç tree –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
            GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç tree SHA
            
            WS->>GH: GitHub API POST /repos/vybcel/repo/git/commits —Å–æ–∑–¥–∞–µ—Ç –µ–¥–∏–Ω—ã–π –∫–æ–º–º–∏—Ç
            Note right of GH: –°–æ–∑–¥–∞–µ—Ç –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏ —à–∞–±–ª–æ–Ω–∞ + parent commit SHA
            GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç commit SHA
            
            WS->>GH: GitHub API PATCH /repos/vybcel/repo/git/refs/heads/main –æ–±–Ω–æ–≤–ª—è–µ—Ç main
            Note right of GH: –û–±–Ω–æ–≤–ª—è–µ—Ç main –≤–µ—Ç–∫—É –Ω–∞ –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
            GH-->>WS: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è main –≤–µ—Ç–∫–∏
            
            WS->>DB: CommitHistoryQueries.createCommitHistory —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å
            Note right of DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç commit SHA –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –≤ commit_history
            
            WS->>DB: ProjectQueries.updateProject –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å ready
            Note right of DB: –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è —Å pending –Ω–∞ ready (–ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤)
            Note right of DB: Netlify —Å–∞–π—Ç –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–º Save All Changes
            
            WS->>WS: –í development –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç ngrok.startTunnel()
            Note right of WS: –°–æ–∑–¥–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL –¥–ª—è webhooks localhost:8080 ‚Üí https://xxx.ngrok.io
            Note right of WS: –í production –∏—Å–ø–æ–ª—å–∑—É–µ—Ç WEBSOCKET_SERVER_URL –Ω–∞–ø—Ä—è–º—É—é
            
            WS->>WS: io.to(`project_${projectId}`).emit('deploy_status_update') –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ
            Note right of WS: –ü—Ä—è–º–æ–µ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ HTTP –≤—ã–∑–æ–≤–æ–≤
            Note right of WS: Railway –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä—è–º—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–±—ã—Ç–∏–π
            
            WS->>B: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update —É–≤–µ–¥–æ–º–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä
            Note right of B: UI –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è - –∫–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
            Note right of B: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é
        end
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∫–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –î–û –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            U->>B: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ (deploy_status = pending)
            Note right of U: –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Initializing..." –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
            Note right of U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏–Ω–Ω–µ—Ä –∏ —Ç–µ–∫—Å—Ç "Project is being initialized"
            Note right of U: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            Note right of U: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–∫–∞ —Ñ–∞–π–ª—ã —à–∞–±–ª–æ–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ GitHub
            
            WS->>B: deploy_status_update —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            Note right of B: UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
            Note right of B: –ö–Ω–æ–ø–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
        else –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞—á–∏–≤–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            U->>B: –ö–ª–∏–∫ –ø–æ —Å—Å—ã–ª–∫–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (deploy_status != pending)
            B->>B: GET /api/projects/projectId/download –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
            B->>GH: downloadProjectFromGitHub –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–∏–π ZIP –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
            GH-->>B: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ main –≤–µ—Ç–∫–∏ –∫–∞–∫ ZIP –∞—Ä—Ö–∏–≤
            B-->>U: –ë—Ä–∞—É–∑–µ—Ä —Å–∫–∞—á–∏–≤–∞–µ—Ç project.zip –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            Note right of U: –ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã —à–∞–±–ª–æ–Ω–∞ + vybcel –∞–≥–µ–Ω—Ç —Å PROJECT_ID
        end
    end

    %% === 2. –õ–û–ö–ê–õ–¨–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê –ò –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ê–ì–ï–ù–¢–ê ===
    rect rgb(250, 255, 250)
        Note over U,W: 2Ô∏è‚É£ –õ–û–ö–ê–õ–¨–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê - —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        U->>U: –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç ZIP –∞—Ä—Ö–∏–≤ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
        Note right of U: –ü–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é –ø–∞–ø–∫—É —Å package.json vybcel –∞–≥–µ–Ω—Ç –∏ git remote
        
        U->>V: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ VSCode –∏–ª–∏ Cursor
        Note right of V: –†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
        
        U->>U: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        Note right of U: pnpm install —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
        
        U->>U: –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É pnpm start –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        Note right of U: –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ pnpm dev –∏ pnpm sync
        
        Note right of U: Git –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ sync
        Note right of U: Remote origin –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞
        
        W->>W: Vybcel –∞–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π pnpm sync
        Note right of W: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –æ–±–ª–∞–∫–æ–º
        
        W->>W: checkGitRepository –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        Note right of W: –ï—Å–ª–∏ .git –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        
        alt Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω
            W->>W: initializeGitRepository –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç git
            Note right of W: git init + remote add origin –∫ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
            W->>W: –°–æ–∑–¥–∞–µ—Ç initial commit —Å —Ç–µ–∫—É—â–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
            Note right of W: git add . && git commit -m "Initial commit from template"
        else Git —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
            W->>W: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç remote origin
            Note right of W: –í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º remote
        end
        
        W->>WS: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ws://localhost:8080/
        Note right of W: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –æ–±–ª–∞—á–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
        Note right of W: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        Note right of W: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–≤—è–∑–∏
        
        W->>WS: emit authenticate –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç projectId –∏ clientType agent
        Note right of W: –ê–≥–µ–Ω—Ç —Å–æ–æ–±—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –∫ –∫–∞–∫–æ–º—É –ø—Ä–æ–µ–∫—Ç—É –æ–Ω –æ—Ç–Ω–æ—Å–∏—Ç—Å—è
        
        WS->>WS: socket.on authenticate –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ index.ts
        Note right of WS: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∫–æ–º–Ω–∞—Ç—É –ø—Ä–æ–µ–∫—Ç–∞
        
        WS->>DB: ProjectQueries.getProjectById –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤–∫–ª—é—á–∞—è GitHub repo
        Note right of DB: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç github_repo_url github_repo_name owner –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        DB-->>WS: –û–±—ä–µ–∫—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–ª—è–º–∏ github_repo_url deploy_status created_at
        
        WS->>WS: socket.join –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∫–æ–º–Ω–∞—Ç—É project projectId
        Note right of WS: –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª—É—á–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
        
        WS->>WS: connectedAgents.set —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç socketId –∞–≥–µ–Ω—Ç–∞
        Note right of WS: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
        
        WS-->>W: emit authenticated –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
        Note right of W: –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
        
        WS->>B: io.to broadcast –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç agent_connected –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
        Note right of B: –ë—Ä–∞—É–∑–µ—Ä –≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞
        
        B->>B: UI –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ –≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ
        Note right of B: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–µ–ª–µ–Ω—É—é –≥–∞–ª–æ—á–∫—É "Connected!" –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫—É
        Note right of B: –ù–û –ù–ï –î–ï–õ–ê–ï–¢ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç - –∂–¥–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        W->>W: startFileWatcher –∑–∞–ø—É—Å–∫–∞–µ—Ç chokidar.watch —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
        Note right of W: –ù–∞—á–∏–Ω–∞–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏ –∫—Ä–æ–º–µ node_modules .git dist
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É
            U->>B: –í–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å "Connected!" –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "Continue to Development"
            Note right of U: –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
            
            B->>B: handleSetupComplete –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ overview
            Note right of B: router.push(`/project/${project.id}/overview`)
            
            B-->>U: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É Overview –ø—Ä–æ–µ–∫—Ç–∞
            Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
        else –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ –¥—Ä—É–≥–æ–π —Å—Å—ã–ª–∫–µ
            Note right of U: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
            Note right of U: –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞—Ö–æ–¥–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ overview
        end
    end

    %% === 3. –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ò STAGING ===
    rect rgb(255, 250, 240)
        Note over V,DB: 3Ô∏è‚É£ –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –§–ê–ô–õ–û–í - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ staging area pending_changes
        
        loop –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
            U->>V: –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –Ω–∞–ø—Ä–∏–º–µ—Ä src/App.tsx –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
            Note right of V: –í–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–ª–∏ —Å—Ç–∏–ª–µ–π
            
            V->>V: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç Ctrl+S –∏–ª–∏ Cmd+S –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞
            Note right of V: –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
            
            V->>W: chokidar –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ change –Ω–∞ —Ñ–∞–π–ª–µ src/App.tsx
            Note right of W: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ chokidar –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
            
            W->>W: –ß–∏—Ç–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ —Å –ø–æ–º–æ—â—å—é fs.readFileSync
            Note right of W: –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
            
            W->>WS: emit file_change –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ
            Note right of W: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç file_path –Ω–æ–≤–æ–µ content –∏ action modified
            
            WS->>WS: socket.on file_change –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞
            Note right of WS: –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
            
            WS->>DB: PendingChangesQueries.upsertPendingChange —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ staging area
            Note right of DB: UPSERT INTO pending_changes —Å –ø–æ–ª–Ω—ã–º content —Ñ–∞–π–ª–∞
            DB->>DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç project_id file_path content action modified timestamp
            
            WS->>B: io.to projectId emit file_change_staged —É–≤–µ–¥–æ–º–ª—è–µ—Ç –í–°–ï –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
            Note right of B: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ staging area
            
            B->>B: UI –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
            Note right of B: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "3 unsaved changes" –∏ –∫–Ω–æ–ø–∫–∏ Save All / Discard All
        end
    end

    %% === 3.5. TOOLBAR –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í –ü–†–û–¶–ï–°–° –†–ê–ó–†–ê–ë–û–¢–ö–ò ===
    rect rgb(245, 255, 245)
        Note over TB,WS: üõ†Ô∏è TOOLBAR INTEGRATION - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –ø—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        
        Note over TB,WS: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TOOLBAR
        TB->>TB: Toolbar –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        Note right of TB: vite-plugin-vybcel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω–µ–¥—Ä—è–µ—Ç toolbar –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç
        Note right of TB: –ß–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ vybcel.config.json –≤–∫–ª—é—á–∞—è PROJECT_ID
        Note right of TB: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∫–∞–∫ –ø–ª–∞–≤–∞—é—â–∞—è –ø–∞–Ω–µ–ª—å
        
        TB->>WS: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ–±–ª–∞—á–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
        Note right of TB: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞
        TB->>WS: emit toolbar_connected –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç PROJECT_ID
        
        WS->>WS: –î–æ–±–∞–≤–ª—è–µ—Ç toolbar –≤ –∫–æ–º–Ω–∞—Ç—É –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        WS->>DB: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ –∏ pending changes
        WS-->>TB: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
        
        TB->>TB: –û–±–Ω–æ–≤–ª—è–µ—Ç UI –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        Note right of TB: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ pending changes –∏ —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è
        Note right of TB: –ö–Ω–æ–ø–∫–∏ Save All –∏ Discard All —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        
        loop –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            W->>WS: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç file_change –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
            WS->>DB: –û–±–Ω–æ–≤–ª—è–µ—Ç pending_changes –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
            
            WS->>TB: WebSocket —Å–æ–±—ã—Ç–∏–µ pending_changes_updated
            Note right of TB: Toolbar –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ –Ω–æ–≤—ã—Ö –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
            
            TB->>TB: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
            Note right of TB: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "3 unsaved changes" –∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            Note right of TB: –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        end
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç Save All –≤ toolbar
            U->>TB: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ Save All Changes –≤ toolbar
            Note right of TB: Toolbar –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
            
            TB->>WS: emit save_all_changes —á–µ—Ä–µ–∑ WebSocket
            Note right of TB: –ö–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
            
            WS->>WS: –í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ GitHub
            Note right of WS: –°–æ–∑–¥–∞–µ—Ç –∫–æ–º–º–∏—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ GitHub –æ—á–∏—â–∞–µ—Ç pending_changes
            
            WS->>TB: WebSocket —Å–æ–±—ã—Ç–∏–µ save_completed —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
            Note right of TB: Toolbar –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            
            TB->>TB: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI
            Note right of TB: "Changes saved successfully!" - –∑–µ–ª–µ–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            Note right of TB: –°—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏
        end
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç Discard All –≤ toolbar
            U->>TB: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ Discard All Changes –≤ toolbar
            Note right of TB: Toolbar –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –æ—Ç–∫–∞—Ç–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
            
            TB->>WS: emit discard_all_changes —á–µ—Ä–µ–∑ WebSocket
            Note right of TB: –ö–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç–∞
            
            WS->>W: –ö–æ–º–∞–Ω–¥–∞ git reset --hard HEAD –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
            Note right of W: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∫–æ–º–º–∏—Ç—É
            WS->>DB: –û—á–∏—â–∞–µ—Ç pending_changes –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
            
            WS->>TB: WebSocket —Å–æ–±—ã—Ç–∏–µ discard_completed
            Note right of TB: Toolbar –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
            
            TB->>TB: –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞
            Note right of TB: "Changes discarded" - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            Note right of TB: –°—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±–Ω—É–ª—è–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        end
        
        alt –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            N->>WS: Netlify –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –æ —Å—Ç–∞—Ç—É—Å–µ –¥–µ–ø–ª–æ—è
            WS->>TB: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update
            
            TB->>TB: –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–ø–ª–æ—è
            Note right of TB: "Building..." ‚Üí "Deploy successful" ‚Üí "Live site updated"
            Note right of TB: –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∂–µ–ª—Ç—ã–π (building) –∑–µ–ª–µ–Ω—ã–π (success) –∫—Ä–∞—Å–Ω—ã–π (failed)
        end
        
        Note over TB,WS: –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê TOOLBAR –ò–ù–¢–ï–ì–†–ê–¶–ò–ò
        Note right of TB: –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä
        Note right of TB: –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —á–µ—Ä–µ–∑ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        Note right of TB: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ toolbar –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
        Note right of TB: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω –Ω–µ –º–µ—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        Note right of TB: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
    end

    %% === 4. DISCARD ALL CHANGES ===
    rect rgb(255, 240, 240)
        Note over U,W: 4Ô∏è‚É£ –û–¢–ú–ï–ù–ê –í–°–ï–• –ò–ó–ú–ï–ù–ï–ù–ò–ô - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Discard All Changes" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
            U->>B: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "Discard All Changes" –≤ –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
            Note right of B: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            
            B->>WS: POST /api/projects/projectId/discard –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –æ—Ç–∫–∞—Ç–∞
            Note right of B: –í–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–∏—Ç WebSocket —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–∫–∞—Ç
            
            WS->>DB: PendingChangesQueries.clearAllPendingChanges –æ—á–∏—â–∞–µ—Ç staging area
            Note right of DB: DELETE FROM pending_changes WHERE project_id = projectId
            DB->>DB: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            
            WS->>W: emit discard_local_changes –∫–æ–º–∞–Ω–¥–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
            Note right of W: –°–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å —Ñ–∞–π–ª—ã
            
            W->>W: –í—ã–ø–æ–ª–Ω—è–µ—Ç git reset --hard HEAD –ª–æ–∫–∞–ª—å–Ω–æ
            Note right of W: –û—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∫–æ–º–º–∏—Ç—É (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Å GitHub)
            
            W->>W: –í—ã–ø–æ–ª–Ω—è–µ—Ç git clean -fd –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
            Note right of W: –£–¥–∞–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–æ–º–º–∏—Ç–µ
            
            W-->>WS: emit discard_completed –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç–∞
            Note right of WS: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–∫–∞—Ç —Ñ–∞–π–ª–æ–≤
            
            WS->>B: io.to projectId emit discard_success —É–≤–µ–¥–æ–º–ª—è–µ—Ç –í–°–ï –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞  
            Note right of B: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—á–∏—Å—Ç–∫–µ pending changes
            
            B->>B: UI —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ Save All –∏ Discard All
            Note right of B: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –Ω–µ—Ç –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
        end
    end

    %% === 5. SAVE ALL CHANGES (COMMIT) ===
    rect rgb(240, 255, 240)
        Note over U,N: 5Ô∏è‚É£ –°–û–•–†–ê–ù–ï–ù–ò–ï –í–°–ï–• –ò–ó–ú–ï–ù–ï–ù–ò–ô - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ —á–µ—Ä–µ–∑ GitHub App (–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –§–õ–û–£)
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Save All Changes" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
            U->>B: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "Save All Changes" –¥–ª—è –∫–æ–º–º–∏—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
            Note right of B: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub
            
            B->>WS: POST /api/projects/projectId/commit –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∫–æ–º–º–∏—Ç–∞
            Note right of B: –í–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç –≤—Å–µ—Ö pending changes
            
            WS->>DB: PendingChangesQueries.getAllPendingChanges –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            Note right of DB: SELECT * FROM pending_changes WHERE project_id = projectId
            DB-->>WS: –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å file_path content action –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
            
            WS->>APP: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π installation token –¥–ª—è GitHub App ID 1390062
            Note right of APP: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–µ–∂–∏–π installation token –¥–µ–π—Å—Ç–≤—É–µ—Ç 60 –º–∏–Ω—É—Ç
            APP-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç installation_token –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ GitHub
            
            WS->>DB: ProjectQueries.getProjectById –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
            Note right of DB: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç github_repo_url owner repo_name –¥–ª—è –∫–æ–º–º–∏—Ç–∞
            DB-->>WS: –û–±—ä–µ–∫—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Å github_repo_url owner vybcel repo_name
            
            Note over WS,GH: üéØ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –°–ù–ê–ß–ê–õ–ê —Å–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
            loop –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
                WS->>GH: GitHub API PUT /repos/vybcel/repo/contents/filePath
                Note right of GH: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ü–û–õ–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ GitHub App —Ç–æ–∫–µ–Ω
                Note right of GH: Authorization Bearer {installation_token}
                GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π sha —Ñ–∞–π–ª–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
            end
            
            WS->>GH: GitHub API POST /repos/vybcel/repo/git/refs/heads/main –æ–±–Ω–æ–≤–ª—è–µ—Ç main
            Note right of GH: –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç "Save project changes" —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏
            GH->>GH: –ö–æ–º–º–∏—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ main –≤–µ—Ç–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ vybcel
            GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç sha –∫–æ–º–º–∏—Ç–∞ commit_url –∏ tree_sha
            
            WS->>DB: CommitHistoryQueries.createCommitHistory —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –æ –∫–æ–º–º–∏—Ç–µ
            Note right of DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç sha –∫–æ–º–º–∏—Ç–∞ commit_message –≤ commit_history
            DB->>DB: INSERT INTO commit_history —Å github_commit_sha –∏ github_commit_url
            
            Note over WS,N: üéØ –¢–û–õ–¨–ö–û –ü–û–°–õ–ï —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–º–∏—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å Netlify —Å–∞–π—Ç
            
            alt –ü–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ—Ç netlify_site_id)
                Note right of WS: üö® –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Netlify —Å–∞–π—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –ü–û–°–õ–ï –∫–æ–º–º–∏—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                Note right of WS: üéØ –¢–µ–ø–µ—Ä—å Netlify –ø—Ä–∏–≤—è–∂–µ—Ç—Å—è –∫ —Ä–µ–ø–æ —Å –ê–ö–¢–£–ê–õ–¨–ù–´–ú –∫–æ–º–º–∏—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                
                WS->>N: Netlify API POST /sites —Å–æ–∑–¥–∞–µ—Ç —Å–∞–π—Ç —Å GitHub –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
                Note right of N: üéØ –°–æ–∑–¥–∞–µ—Ç Netlify —Å–∞–π—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —Ä–µ–ø–æ —Å –ì–û–¢–û–í–´–ú –∫–æ–º–º–∏—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
                Note right of N: üéØ Netlify —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—Ç –∫–æ–º–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞—á–Ω–µ—Ç –µ–≥–æ –¥–µ–ø–ª–æ–∏—Ç—å
                N->>N: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç build settings –∏ deploy key
                N-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç netlify_site_id –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
                
                WS->>DB: ProjectQueries.updateProject —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç netlify_site_id
                Note right of DB: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç netlify_site_id + deploy_status building
                
                WS->>N: setupWebhookForSite –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç webhooks –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
                Note right of N: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç webhook –¥–ª—è —Å–æ–±—ã—Ç–∏–π deploy_created deploy_building deploy_failed
                
                Note right of N: üéØ –†–ï–ó–£–õ–¨–¢–ê–¢: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç
                Note right of N: üéØ –ù–ï–¢ –ª–∏—à–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è template commit - —Å—Ä–∞–∑—É –¥–µ–ø–ª–æ–∏—Ç—Å—è user commit
            else –ù–µ –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç (netlify_site_id —É–∂–µ –µ—Å—Ç—å)
                Note right of WS: Netlify —Å–∞–π—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω —Ä–∞–Ω–µ–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ
                Note right of WS: –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ GitHub webhook –æ—Ç –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
            end
            
            WS->>DB: PendingChangesQueries.clearAllPendingChanges –æ—á–∏—â–∞–µ—Ç staging area
            Note right of DB: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ pending_changes —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
            DB->>DB: DELETE FROM pending_changes WHERE project_id equals projectId
            
            WS->>W: emit pull_latest_changes –∫–æ–º–∞–Ω–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å GitHub
            Note right of W: –ü—Ä–æ—Å–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤—ã–º –∫–æ–º–º–∏—Ç–æ–º
            
            alt –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ git pull
                WS->>APP: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π installation token –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ git pull
                APP-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç 60 –º–∏–Ω—É—Ç
                
                WS->>W: emit git_pull_with_token –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –∞–≥–µ–Ω—Ç—É
                Note right of W: –ü–æ–ª—É—á–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ git pull
                
                W->>W: –í—ã–ø–æ–ª–Ω—è–µ—Ç git fetch + reset —Å —Ç–æ–∫–µ–Ω–æ–º –≤ URL
                Note right of W: git fetch + git reset --hard FETCH_HEAD (–∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ merge)
                W-->>WS: emit pull_completed –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
            else –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ WebSocket
                WS->>GH: GitHub API GET /repos/vybcel/repo/contents –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
                GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ GitHub
                
                WS->>W: emit update_local_files –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
                Note right of W: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –Ω–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
                W-->>WS: emit files_updated –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
            end
            
            WS->>B: io.to projectId emit save_success —É–≤–µ–¥–æ–º–ª—è–µ—Ç –í–°–ï –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –æ –∫–æ–º–º–∏—Ç–µ
            Note right of B: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏ –æ—á–∏—Å—Ç–∫–µ pending changes
            
            B->>B: UI –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ –∏ –æ—á–∏—â–∞–µ—Ç pending changes
            Note right of B: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —É–±–∏—Ä–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        end
        
        Note over U,N: üéØ –ö–õ–Æ–ß–ï–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ì–û –§–õ–û–£
        Note right of U: ‚úÖ –ö–æ–º–º–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú
        Note right of U: ‚úÖ Netlify —Å–∞–π—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –ü–û–°–õ–ï –∏ —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç
        Note right of U: ‚úÖ –ù–ï–¢ –ª–∏—à–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è template commit
        Note right of U: ‚úÖ –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π —Å—Ä–∞–∑—É —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        Note right of U: ‚úÖ –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –∏ –ª–æ–≥–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
        Note right of U: ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∞ race condition –º–µ–∂–¥—É –∫–æ–º–º–∏—Ç–æ–º –∏ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å–∞–π—Ç–∞
    end

    %% === 6. –ê–í–¢–û–î–ï–ü–õ–û–ô ===
    rect rgb(255, 248, 240)
        Note over GH,B: 6Ô∏è‚É£ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô - Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
        
        GH->>N: GitHub webhook —É–≤–µ–¥–æ–º–ª—è–µ—Ç Netlify –æ –Ω–æ–≤–æ–º –∫–æ–º–º–∏—Ç–µ –≤ main
        Note right of GH: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ webhook –ø—Ä–∏ push –≤ main –≤–µ—Ç–∫—É
        Note right of GH: Netlify —É–∂–µ –∏–º–µ–µ—Ç deploy key –¥–ª—è —á—Ç–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Ä–µ–ø–æ
        
        N->>N: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç build –ø—Ä–æ—Ü–µ—Å—Å
        Note right of N: –°–∫–∞—á–∏–≤–∞–µ—Ç –∫–æ–¥ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ GitHub —Ä–µ–ø–æ –∏—Å–ø–æ–ª—å–∑—É—è deploy key
        
        N->>GH: –°–∫–∞—á–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        Note right of GH: Netlify –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤–æ–º—É –∫–æ–º–º–∏—Ç—É —á–µ—Ä–µ–∑ deploy key
        
        N->>N: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã build –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–π—Ç–∞
        Note right of N: pnpm install && pnpm build —Å–æ–∑–¥–∞–µ—Ç production –≤–µ—Ä—Å–∏—é
        
        alt –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
            N->>N: –î–µ–ø–ª–æ–∏—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ CDN
            Note right of N: –ü—É–±–ª–∏–∫—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–∞–π—Ç–∞
            
            N->>WS: POST /webhooks/netlify —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ —É—Å–ø–µ—à–Ω–æ–º –¥–µ–ø–ª–æ–µ
            Note right of N: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –æ —Å—Ç–∞—Ç—É—Å–µ –¥–µ–ø–ª–æ—è –ò —Ñ–∏–Ω–∞–ª—å–Ω—ã–π URL —Å–∞–π—Ç–∞
            
            WS->>DB: ProjectQueries.updateProject —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç deploy_status ready + netlify_url
            Note right of DB: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è –ò –°–û–•–†–ê–ù–Ø–ï–¢ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –≤–ø–µ—Ä–≤—ã–µ
            
            WS->>B: io.to projectId emit deploy_status_update —É–≤–µ–¥–æ–º–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä
            Note right of B: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–µ–ª–µ–Ω—ã–π —Å—Ç–∞—Ç—É—Å "Deployed successfully"
            
        else –°–±–æ—Ä–∫–∞ –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å
            N->>WS: POST /webhooks/netlify —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –æ—à–∏–±–∫–µ —Å–±–æ—Ä–∫–∏
            Note right of N: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ build logs
            
            WS->>DB: ProjectQueries.updateProject —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç deploy_status failed
            Note right of DB: –ü–æ–º–µ—á–∞–µ—Ç –¥–µ–ø–ª–æ–π –∫–∞–∫ –Ω–µ—É–¥–∞—á–Ω—ã–π
            
            WS->>B: io.to projectId emit deploy_status_update —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –æ—à–∏–±–∫–µ
            Note right of B: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–±–ª–µ–º–µ
        end
    end

    %% === 7. –£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–´–ô OVERVIEW –ò REAL-TIME –û–ë–ù–û–í–õ–ï–ù–ò–Ø ===
    rect rgb(248, 248, 255)
        Note over U,B: 7Ô∏è‚É£ –£–ù–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–´–ô OVERVIEW - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
        
        U->>B: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –µ–¥–∏–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Overview –ø—Ä–æ–µ–∫—Ç–∞
        Note right of B: GET /project/projectId/overview - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
        
        B->>DB: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏ pending changes
        Note right of DB: –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebSocket —Å–æ—Å—Ç–æ—è–Ω–∏—è
        DB-->>B: –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ pending changes —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–µ–∫—Ç–∞
        
        B-->>U: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç Overview —Å –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –∫–æ–º–º–∏—Ç–æ–≤ –≤ real-time
        Note right of U: –í–°–ï –∫–æ–º–º–∏—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞ Overview –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5
        Note right of U: –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ WebSocket –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è—Ö
        Note right of U: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ
        Note right of U: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Agent Status Deploy Status Last Updated
        Note right of U: Sidebar –¥–ª—è Save All –∏ Discard All –¥–µ–π—Å—Ç–≤–∏–π
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
            W->>WS: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç file_change —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
            WS->>B: WebSocket —Å–æ–±—ã—Ç–∏–µ file_change_staged –æ–±–Ω–æ–≤–ª—è–µ—Ç Pending Changes
            Note right of B: UI –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ pending changes
            
            U->>B: –ù–∞–∂–∏–º–∞–µ—Ç "Save All Changes" –≤ Overview sidebar
            WS->>GH: –°–æ–∑–¥–∞–µ—Ç GitHub –∫–æ–º–º–∏—Ç —á–µ—Ä–µ–∑ save_all_changes
            WS->>B: WebSocket —Å–æ–±—ã—Ç–∏–µ commit_created —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∫–æ–º–º–∏—Ç–∞
            Note right of B: –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –Ω–∞ Overview –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
            Note right of B: –ù–æ–≤—ã–π –∫–æ–º–º–∏—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –ë–ï–ó –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            
            WS->>N: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
            WS->>B: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è
            Note right of B: Deploy Status –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ real-time
        end
        
        U->>B: –ö–ª–∏–∫ –ø–æ –∫–æ–º–º–∏—Ç—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤
        Note right of B: –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –∫–æ–º–º–∏—Ç–∞ —Å icons –∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
        
        U->>B: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "Open Live Site" 
        Note right of B: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Netlify URL –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞
        
        U->>B: –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ "View on GitHub"
        Note right of B: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π vybcel-project-{id}
        B-->>U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–æ –ù–ï –º–æ–∂–µ—Ç –≤ –Ω–µ–≥–æ –ø—É—à–∏—Ç—å
        Note right of U: –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ GitHub –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    end

    %% === 8. –£–î–ê–õ–ï–ù–ò–ï –ü–†–û–ï–ö–¢–ê ===
    rect rgb(255, 235, 235)
        Note over U,N: 8Ô∏è‚É£ –ü–û–õ–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –ü–†–û–ï–ö–¢–ê - –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
        
        U->>B: –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ Settings –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "Delete Project"
        Note right of B: GET /project/projectId/settings –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫—Ä–∞—Å–Ω—É—é Danger Zone —Å –∫–Ω–æ–ø–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è
        
        U->>B: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        Note right of U: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
        
        B->>B: DELETE /api/projects/projectId –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —É–¥–∞–ª–µ–Ω–∏—è
        Note right of B: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ RLS –≤ Supabase
        
        B->>DB: ProjectQueries.getProjectById –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
        Note right of DB: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å netlify_site_id github_repo_name –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
        DB-->>B: –ü—Ä–æ–µ–∫—Ç —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
        
        alt –ï—Å—Ç—å Netlify —Å–∞–π—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
            B->>N: DELETE /api/v1/sites/{netlify_site_id} —É–¥–∞–ª—è–µ—Ç Netlify —Å–∞–π—Ç
            Note right of N: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è NETLIFY_ACCESS_TOKEN –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            N->>N: –£–¥–∞–ª—è–µ—Ç –∂–∏–≤–æ–π —Å–∞–π—Ç DNS –∑–∞–ø–∏—Å–∏ CDN –∫—ç—à webhooks
            N-->>B: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å–∞–π—Ç–∞ –∏–ª–∏ 404 –µ—Å–ª–∏ —É–∂–µ —É–¥–∞–ª–µ–Ω
            Note right of B: –õ–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ —Å–∞–π—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
        else –ù–µ—Ç Netlify —Å–∞–π—Ç–∞
            Note right of B: –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ Netlify —Ç–∞–∫ –∫–∞–∫ netlify_site_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        end
        
        alt –ï—Å—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è  
            B->>APP: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç installation token –¥–ª—è GitHub App ID 1390062
            Note right of APP: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT –∏ –ø–æ–ª—É—á–∞–µ—Ç installation token –Ω–∞ 60 –º–∏–Ω—É—Ç
            APP-->>B: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç installation_token –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
            
            B->>GH: DELETE /repos/vybcel/{github_repo_name} —É–¥–∞–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
            Note right of GH: Authorization Bearer {installation_token}
            Note right of GH: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–∑ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
            GH->>GH: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ issues PR webhooks
            GH-->>B: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ 404 –µ—Å–ª–∏ —Ä–µ–ø–æ –Ω–µ –Ω–∞–π–¥–µ–Ω
            Note right of B: –õ–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ —Ä–µ–ø–æ —É–∂–µ —É–¥–∞–ª–µ–Ω
        else –ù–µ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
            Note right of B: –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ GitHub —Ç–∞–∫ –∫–∞–∫ github_repo_name –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
        end
        
        B->>DB: ProjectQueries.deleteProject —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        Note right of DB: DELETE FROM projects WHERE id = projectId AND user_id = auth.uid()
        
        DB->>DB: –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ foreign key constraints
        Note right of DB: AUTO DELETE FROM file_history WHERE project_id = projectId
        Note right of DB: AUTO DELETE FROM commit_history WHERE project_id = projectId  
        Note right of DB: AUTO DELETE FROM pending_changes WHERE project_id = projectId
        
        DB-->>B: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        
        B-->>U: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        Note right of U: –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ /dashboard
        
        alt –ï—Å–ª–∏ WebSocket –∞–≥–µ–Ω—Ç –±—ã–ª –ø–æ–¥–∫–ª—é—á–µ–Ω
            WS->>W: –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç–æ–º —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —É–¥–∞–ª–µ–Ω
            Note right of W: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Ç–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            
            W->>W: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç file watcher –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ  
            Note right of W: –ü—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
            
            W-->>U: –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "Project deleted remotely connection closed"
            Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —É–¥–∞–ª–µ–Ω —É–¥–∞–ª–µ–Ω–Ω–æ
        end
    end

    %% === 9. –£–ú–ù–ê–Ø –õ–û–ì–ò–ö–ê –û–ù–ë–û–†–î–ò–ù–ì–ê ===
    rect rgb(240, 248, 255)
        Note over U,B: 9Ô∏è‚É£ –£–ú–ù–ê–Ø –õ–û–ì–ò–ö–ê –û–ù–ë–û–†–î–ò–ù–ì–ê - —É–ø—Ä–∞–≤–ª—è–µ–º–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ –∫–Ω–æ–ø–∫–µ
        
        Note over U,B: –ò–ù–î–ò–ö–ê–¢–û–† –ó–ê–í–ï–†–®–ï–ù–ò–Ø –û–ù–ë–û–†–î–ò–ù–ì–ê
        Note right of U: netlify_site_id = null ‚Üí –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –ù–ï –ø—Ä–æ–π–¥–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É
        Note right of U: netlify_site_id != null ‚Üí –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø—Ä–æ–π–¥–µ–Ω –°–ö–†–´–í–ê–ï–ú –≤–∫–ª–∞–¥–∫—É  
        Note right of U: –ù–∞–¥–µ–∂–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π = –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
        Note right of U: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –∏–ª–∏ —Å–µ—Å—Å–∏–π
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ /project/projectId (–±–µ–∑ –ø—É—Ç–∏)
            U->>B: GET /project/projectId –∑–∞–ø—Ä–æ—Å –∫ –∫–æ—Ä–Ω—é –ø—Ä–æ–µ–∫—Ç–∞
            B->>DB: ProjectQueries.getProjectById –ø—Ä–æ–≤–µ—Ä—è–µ—Ç netlify_site_id
            
            alt netlify_site_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ø—Ä–æ–µ–∫—Ç –Ω–æ–≤—ã–π)
                DB-->>B: project.netlify_site_id = null
                B-->>U: redirect(`/project/${id}/onboarding`) 
                Note right of U: –ù–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
            else netlify_site_id –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø—Ä–æ–π–¥–µ–Ω)
                DB-->>B: project.netlify_site_id = "site_12345"
                B-->>U: redirect(`/project/${id}/overview`)
                Note right of U: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å—Ä–∞–∑—É –Ω–∞ overview
            end
        end
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–π—Ç–∏ –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
            U->>B: GET /project/projectId/onboarding –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥
            B->>B: Onboarding –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç project.netlify_site_id –≤ useEffect
            
            alt netlify_site_id –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
                B-->>U: router.push(`/project/${id}/overview`)
                Note right of U: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –Ω–∞ overview (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω)
            else netlify_site_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
                B-->>U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏ –æ–∂–∏–¥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                Note right of U: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ë–ï–ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞
                Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞–∂–∞—Ç—å "Continue to Development" –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
            end
        end
        
        alt –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            B->>B: ProjectNavigation –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç project –¥–∞–Ω–Ω—ã–µ
            B->>B: const showOnboarding = !project?.netlify_site_id
            
            alt showOnboarding = true (–Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç)
                B-->>U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 –≤–∫–ª–∞–¥–∫–∏ Overview Onboarding Settings
                Note right of U: –ü–æ–ª–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
            else showOnboarding = false (–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)
                B-->>U: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç 2 –≤–∫–ª–∞–¥–∫–∏ Overview Settings  
                Note right of U: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
            end
        end
        
        Note over U,B: –ö–õ–Æ–ß–ï–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –õ–û–ì–ò–ö–ï –û–ù–ë–û–†–î–ò–ù–ì–ê
        Note right of U: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç–∞—Ç—É—Å "Connected!" –∏ —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
        Note right of U: –ö–Ω–æ–ø–∫–∞ "Continue to Development" –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
        Note right of U: –†–µ–¥–∏—Ä–µ–∫—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ —è–≤–Ω–æ–º—É –Ω–∞–∂–∞—Ç–∏—é –∫–Ω–æ–ø–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        Note right of U: –≠—Ç–æ –¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
    end

    %% === 10. –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò ===
    rect rgb(230, 255, 230)
        Note over U,B: üîü –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò - –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
        
        Note over U,B: REAL-TIME ARCHITECTURE
        Note right of B: WebSocket —Å–æ–±—ã—Ç–∏–µ commit_created –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
        Note right of B: WebSocket —Å–æ–±—ã—Ç–∏–µ file_change_staged –æ–±–Ω–æ–≤–ª—è–µ—Ç pending changes
        Note right of B: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è
        Note right of B: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        Note right of B: WebSocket —Å–æ–±—ã—Ç–∏–µ toolbar_update_available –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è toolbar
        Note right of B: WebSocket —Å–æ–±—ã—Ç–∏–µ pending_changes_updated —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç toolbar
        Note right of B: HTTP polling –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞–Ω - —Ç–æ–ª—å–∫–æ WebSocket —Å–æ–±—ã—Ç–∏—è
        Note right of B: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
        Note right of B: API endpoint /api/notify-status-change –¥–ª—è –º–µ–∂—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        
        Note over U,B: –ö–õ–Æ–ß–ï–í–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ GitHub
        Note right of U: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å GitHub –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —á–µ—Ä–µ–∑ GitHub App
        Note right of U: –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ vybcel
        Note right of U: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å deploy keys –¥–ª—è —á—Ç–µ–Ω–∏—è
        Note right of U: –ö–æ–º–º–∏—Ç –≤ main = —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ + –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π
        Note right of U: Staging area –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏—Ö
        Note right of U: –õ–æ–∫–∞–ª—å–Ω—ã–π git reset —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–∫–∞—Ç–∞
        Note right of U: –£–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
        Note right of U: Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        Note right of U: üöÄ SERVERLESS-SAFE: –í—Å–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ Railway
        Note right of U: Next.js –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ HTTP –≤—ã–∑–æ–≤—ã –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É
        Note right of U: Railway –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç - —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è
        
        Note over U,B: üõ†Ô∏è TOOLBAR AUTO-UPDATE –°–ò–°–¢–ï–ú–ê
        Note right of U: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π toolbar –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ vite-plugin-vybcel
        Note right of U: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ toolbar –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ npm –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        Note right of U: Hot Module Replacement –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        Note right of U: Cloudflare R2 Storage –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π toolbar
        Note right of U: –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–∞–Ω–∞–ª–∞–º–∏ stable/beta/dev –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        Note right of U: CLI deploy tool –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
        Note right of U: Admin web interface –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
        Note right of U: WebSocket push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        Note right of U: Checksum validation –∏ graceful fallback –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        Note right of U: –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ Cmd/Ctrl+Shift+U –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        
        Note over U,B: –ù–ê–í–ò–ì–ê–¶–ò–Ø –ò UX
        Note right of U: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è - —Ç–æ–ª—å–∫–æ 2-3 –≤–∫–ª–∞–¥–∫–∏ Overview Onboarding Settings
        Note right of U: –í—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ Overview
        Note right of U: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ 5 –∑–∞–ø–∏—Å–µ–π
        Note right of U: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è
        Note right of U: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
        Note right of U: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π toolbar –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä—è–º–æ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        Note right of U: –ü–ª–∞–≤–∞—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –º–µ—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        Note right of U: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–π
                 Note right of U: Admin –ø–∞–Ω–µ–ª—å /admin/toolbar –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
    end

    %% === 11. –ù–û–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò API ENDPOINTS ===
    rect rgb(240, 240, 255)
        Note over U,B: üîß –î–û–ë–ê–í–õ–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ TOOLBAR AUTO-UPDATE –°–ò–°–¢–ï–ú–´
        
        Note over U,B: API ENDPOINTS
        Note right of B: GET /api/toolbar/check - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π toolbar
        Note right of B: POST /api/toolbar/upload - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π toolbar (admin only)
        Note right of B: POST /api/toolbar/push-update - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—É
        Note right of B: POST /api/toolbar/broadcast-update - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–∞–º
        Note right of B: POST /api/toolbar/force-reload - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ toolbar
        Note right of B: GET /admin/toolbar - –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
        
        Note over U,B: –ù–û–í–´–ï –ü–ê–ö–ï–¢–´ –ò –ú–û–î–£–õ–ò  
        Note right of B: @shipvibes/storage - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cloudflare R2 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
        Note right of B: R2ToolbarManager - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ toolbar –≤ –æ–±–ª–∞—á–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
        Note right of B: packages/vite-plugin-vybcel - —É–ª—É—á—à–µ–Ω–Ω—ã–π vite –ø–ª–∞–≥–∏–Ω —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
        Note right of B: ToolbarUpdater class - —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ä—è—á–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è toolbar –∫–æ–¥–∞
        Note right of B: scripts/deploy-toolbar.js - CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        Note right of B: apps/web/app/admin/toolbar - –∞–¥–º–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        
        Note over U,B: WEBSOCKET EVENTS –†–ê–°–®–ò–†–ï–ù–ò–Ø
        Note right of WS: toolbar_update_available - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
        Note right of WS: toolbar_connected - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ toolbar –∫ —Å–µ—Ä–≤–µ—Ä—É
        Note right of WS: pending_changes_updated - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å toolbar
        Note right of WS: save_all_changes - –∫–æ–º–∞–Ω–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ toolbar
        Note right of WS: discard_all_changes - –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ toolbar
        Note right of WS: toolbar_force_reload - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
        
        Note over U,B: –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö –†–ê–°–®–ò–†–ï–ù–ò–Ø
        Note right of TB: Hot Module Replacement (HMR) –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
        Note right of TB: Semantic versioning –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
        Note right of TB: Checksum validation –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        Note right of TB: Update channels (stable/beta/dev) –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        Note right of R2: Cloudflare R2 –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π
        Note right of CLI: Commander.js –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–µ–ø–ª–æ—è
        Note right of ADM: Drag & drop file upload –¥–ª—è —É–¥–æ–±–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Ä—Å–∏–π
        Note right of ADM: Real-time WebSocket push –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        
        Note over U,B: ENVIRONMENT VARIABLES –î–û–ë–ê–í–õ–ï–ù–´
        Note right of B: TOOLBAR_UPDATE_ENDPOINT - URL endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        Note right of B: R2_ENDPOINT R2_ACCESS_KEY_ID R2_SECRET_ACCESS_KEY - Cloudflare R2 credentials
        Note right of B: R2_BUCKET_NAME R2_PUBLIC_URL - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ bucket –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
        Note right of B: WEBSOCKET_SERVER_URL - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π URL WebSocket —Å–µ—Ä–≤–µ—Ä–∞
        Note right of B: NEXT_PUBLIC_TOOLBAR_UPDATE_ENDPOINT - –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π endpoint
        
        Note over U,B: üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –í–ù–ï–î–†–ï–ù–ò–Ø TOOLBAR –°–ò–°–¢–ï–ú–´
        Note right of U: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –ø–∞—Ç—á–∏ –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è npm –ø–∞–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        Note right of U: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é toolbar
        Note right of U: A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã stable/beta/dev
        Note right of U: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket push notifications
        Note right of U: –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç
        Note right of U: –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å rollback –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é
    end