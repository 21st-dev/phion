sequenceDiagram
    participant U as üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant W as üåê Web App Next.js –ø–æ—Ä—Ç 3004
    participant V as üíª VSCode/Cursor —Å Extension
    participant T as üõ†Ô∏è Phion Toolbar (npm –ø–∞–∫–µ—Ç)
    participant C as üì¶ CLI Agent (npm phion)
    participant WS as üì° WebSocket Server Railway –ø–æ—Ä—Ç 8080
    participant DB as üóÉÔ∏è Supabase PostgreSQL Database
    participant APP as ü§ñ GitHub App ID 1390062
    participant GH as üêô GitHub API –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è phion
    participant N as üî• Netlify Deploy Service

    Note over U,N: üöÄ PHION PRODUCTION ARCHITECTURE - PART 2: FILE OPERATIONS & PROJECT MANAGEMENT

    %% === 4. SAVE ALL CHANGES (COMMIT) ===
    rect rgb(240, 255, 240)
        Note over U,N: 4Ô∏è‚É£ –°–û–•–†–ê–ù–ï–ù–ò–ï –í–°–ï–• –ò–ó–ú–ï–ù–ï–ù–ò–ô - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ —á–µ—Ä–µ–∑ GitHub App
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Save All Changes" –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ toolbar
            U->>W: –ö–ª–∏–∫ "Save All Changes" –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
            Note right of W: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitHub
            Note right of U: –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å Save All –≤ toolbar floating panel
            
            alt –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ toolbar
                U->>T: –ö–ª–∏–∫ Save All Changes –≤ toolbar
                T->>WS: emit toolbar_save_all —á–µ—Ä–µ–∑ WebSocket
                Note right of T: –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
            else –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                U->>W: –ö–ª–∏–∫ Save All Changes –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
                W->>WS: POST /api/projects/projectId/commit –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∫–æ–º–º–∏—Ç–∞
                Note right of W: –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–∏—Ç WebSocket —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç
            end
            
            WS->>DB: PendingChangesQueries.getAllPendingChanges –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            Note right of DB: SELECT * FROM pending_changes WHERE project_id = projectId
            DB-->>WS: –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å file_path content action –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
            
            Note right of WS: üîê .ENV –§–ê–ô–õ–´ –ù–ï –ö–û–ú–ú–ò–¢–Ø–¢–°–Ø - –æ–Ω–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —Å Netlify
            Note right of WS: Pending changes —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ–ª—å–∫–æ –∫–æ–¥ —Ñ–∞–π–ª—ã (js tsx css md –∏ –¥—Ä.)
            Note right of WS: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É–∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å Netlify —á–µ—Ä–µ–∑ env_file_change
            
            WS->>APP: –ó–∞–ø—Ä–æ—Å –Ω–æ–≤–æ–≥–æ installation token –¥–ª—è GitHub App ID 1390062
            Note right of APP: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–µ–∂–∏–π installation token –¥–µ–π—Å—Ç–≤—É—é—â–∏–π 60 –º–∏–Ω—É—Ç
            APP-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç installation_token –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ GitHub
            
            WS->>DB: ProjectQueries.getProjectById –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
            Note right of DB: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç github_repo_url owner repo_name –¥–ª—è –∫–æ–º–º–∏—Ç–∞
            DB-->>WS: –û–±—ä–µ–∫—Ç –ø—Ä–æ–µ–∫—Ç–∞ —Å github_repo_url owner phion repo_name
            
            loop –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
                WS->>GH: GitHub API PUT /repos/phion/repo/contents/filePath
                Note right of GH: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ü–û–õ–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï –§–ê–ô–õ–ê —á–µ—Ä–µ–∑ GitHub App token
                Note right of GH: Authorization Bearer {installation_token}
                GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π file sha –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
            end
            
            WS->>GH: GitHub API POST /repos/phion/repo/git/refs/heads/main –æ–±–Ω–æ–≤–ª—è–µ—Ç main
            Note right of GH: –°–æ–∑–¥–∞–µ—Ç –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç "Save project changes" —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏
            GH->>GH: –ö–æ–º–º–∏—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ main –≤–µ—Ç–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ phion
            GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç commit sha commit_url –∏ tree_sha
            
            WS->>DB: CommitHistoryQueries.createCommitHistory —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –∫–æ–º–º–∏—Ç–∞
            Note right of DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç commit sha commit_message –≤ commit_history
            DB->>DB: INSERT INTO commit_history —Å github_commit_sha –∏ github_commit_url
            
            alt –ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–º–∏—Ç (–Ω–µ—Ç netlify_site_id)
                Note right of WS: –°–æ–∑–¥–∞–µ–º Netlify —Å–∞–π—Ç –ü–û–°–õ–ï –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
                Note right of WS: Netlify –ø—Ä–∏–≤—è–∂–µ—Ç—Å—è –∫ —Ä–µ–ø–æ —Å –ì–û–¢–û–í–´–ú –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–º–∏—Ç–æ–º
                
                WS->>N: Netlify API POST /sites —Å–æ–∑–¥–∞–µ—Ç —Å–∞–π—Ç —Å GitHub –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
                Note right of N: –°–æ–∑–¥–∞–µ—Ç Netlify —Å–∞–π—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —Ä–µ–ø–æ —Å –ì–û–¢–û–í–´–ú –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–º–∏—Ç–æ–º
                Note right of N: Netlify —Å—Ä–∞–∑—É –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–º–∏—Ç –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –µ–≥–æ –¥–µ–ø–ª–æ–∏—Ç—å
                N->>N: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç build settings –∏ deploy key
                N-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç netlify_site_id –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î
                
                WS->>DB: ProjectQueries.updateProject —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç netlify_site_id
                Note right of DB: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç netlify_site_id + deploy_status building
                
                WS->>N: setupWebhookForSite –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç webhooks –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
                Note right of N: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç webhook –¥–ª—è —Å–æ–±—ã—Ç–∏–π deploy_created deploy_building deploy_failed
                
                Note right of N: –†–ï–ó–£–õ–¨–¢–ê–¢: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç
                Note right of N: –ù–ï–¢ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è template –∫–æ–º–º–∏—Ç–∞ - —Å—Ä–∞–∑—É –¥–µ–ø–ª–æ–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–º–∏—Ç
            else –ù–µ –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç (netlify_site_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
                Note right of WS: Netlify —Å–∞–π—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω —Ä–∞–Ω–µ–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ
                Note right of WS: –ê–≤—Ç–æ-–¥–µ–ø–ª–æ–π —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ GitHub webhook –æ—Ç –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
            end
            
            WS->>DB: PendingChangesQueries.clearAllPendingChanges –æ—á–∏—â–∞–µ—Ç staging area
            Note right of DB: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ pending_changes —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
            DB->>DB: DELETE FROM pending_changes WHERE project_id equals projectId
            
            WS->>C: emit pull_latest_changes –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å GitHub
            Note right of C: –ü—Ä–æ—Å–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –Ω–æ–≤—ã–º –∫–æ–º–º–∏—Ç–æ–º
            
            alt –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ git pull
                WS->>APP: –ó–∞–ø—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ installation token –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ git pull
                APP-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É—é—â–∏–π 60 –º–∏–Ω—É—Ç
                
                WS->>C: emit git_pull_with_token –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –∞–≥–µ–Ω—Ç—É
                Note right of C: –ü–æ–ª—É—á–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ git pull
                
                C->>C: –í—ã–ø–æ–ª–Ω—è–µ—Ç git fetch + reset —Å —Ç–æ–∫–µ–Ω–æ–º –≤ URL
                Note right of C: git fetch + git reset --hard FETCH_HEAD (–∏–∑–±–µ–≥–∞–µ—Ç merge conflicts)
                C-->>WS: emit pull_completed –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
            else –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ - –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ WebSocket
                WS->>GH: GitHub API GET /repos/phion/repo/contents –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
                GH-->>WS: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ GitHub
                
                WS->>C: emit update_local_files –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤
                Note right of C: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –Ω–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
                C-->>WS: emit files_updated –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
            end
            
            WS->>W: io.to projectId emit save_success —É–≤–µ–¥–æ–º–ª—è–µ—Ç –í–°–ï –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –æ –∫–æ–º–º–∏—Ç–µ
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ save_completed —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
            Note right of W: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏ –æ—á–∏—Å—Ç–∫–µ pending_changes
            Note right of T: Toolbar –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            
            W->>W: UI –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ –∏ –æ—á–∏—â–∞–µ—Ç pending changes
            Note right of W: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —É–±–∏—Ä–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π
            T->>T: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI
            Note right of T: "Changes saved successfully!" - –∑–µ–ª–µ–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            Note right of T: –°—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏
        end
    end

    %% === 5. DISCARD ALL CHANGES ===
    rect rgb(255, 240, 240)
        Note over U,C: 5Ô∏è‚É£ –û–¢–ú–ï–ù–ê –í–°–ï–• –ò–ó–ú–ï–ù–ï–ù–ò–ô - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Discard All Changes" –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ toolbar
            U->>W: –ö–ª–∏–∫ "Discard All Changes" –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
            Note right of W: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å –≤—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
            Note right of U: –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å Discard All –≤ toolbar floating panel
            
            alt –û—Ç–º–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ toolbar
                U->>T: –ö–ª–∏–∫ Discard All Changes –≤ toolbar
                T->>WS: emit toolbar_discard_all —á–µ—Ä–µ–∑ WebSocket
                Note right of T: –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç–∞
            else –û—Ç–º–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                U->>W: –ö–ª–∏–∫ Discard All Changes –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
                W->>WS: POST /api/projects/projectId/discard –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É discard
                Note right of W: –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–∏—Ç WebSocket —Å–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–∫–∞—Ç
            end
            
            WS->>DB: PendingChangesQueries.clearAllPendingChanges –æ—á–∏—â–∞–µ—Ç staging area
            Note right of DB: DELETE FROM pending_changes WHERE project_id = projectId
            DB->>DB: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            
            WS->>C: emit discard_local_changes –∫–æ–º–∞–Ω–¥–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
            Note right of C: –°–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –æ—Ç–∫–∞—Ç–∏—Ç—å —Ñ–∞–π–ª—ã
            
            C->>C: –í—ã–ø–æ–ª–Ω—è–µ—Ç git reset --hard HEAD –ª–æ–∫–∞–ª—å–Ω–æ
            Note right of C: –û—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∫–æ–º–º–∏—Ç—É (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Å GitHub)
            
            C->>C: –í—ã–ø–æ–ª–Ω—è–µ—Ç git clean -fd –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è untracked —Ñ–∞–π–ª–æ–≤
            Note right of C: –£–¥–∞–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–æ–º–º–∏—Ç–µ
            
            C-->>WS: emit discard_completed –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–∫–∞—Ç–∞
            Note right of WS: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–∫–∞—Ç —Ñ–∞–π–ª–æ–≤
            
            WS->>W: io.to projectId emit discard_success —É–≤–µ–¥–æ–º–ª—è–µ—Ç –í–°–ï –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ discard_completed
            Note right of W: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—á–∏—Å—Ç–∫–µ pending_changes
            Note right of T: Toolbar –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–∫–∞—Ç–∞
            
            W->>W: UI —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ Save All –∏ Discard All
            Note right of W: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
            T->>T: –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞
            Note right of T: "Changes discarded" - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            Note right of T: –°—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        end
    end

    %% === 6. AUTO-DEPLOY ===
    rect rgb(255, 248, 240)
        Note over GH,W: 6Ô∏è‚É£ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô - Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
        
        GH->>N: GitHub webhook —É–≤–µ–¥–æ–º–ª—è–µ—Ç Netlify –æ –Ω–æ–≤–æ–º –∫–æ–º–º–∏—Ç–µ –≤ main
        Note right of GH: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π webhook trigger –ø—Ä–∏ push –≤ main –≤–µ—Ç–∫—É
        Note right of GH: –£ Netlify —É–∂–µ –µ—Å—Ç—å deploy key –¥–ª—è —á—Ç–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Ä–µ–ø–æ
        
        N->>N: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏
        Note right of N: –°–∫–∞—á–∏–≤–∞–µ—Ç –∫–æ–¥ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ GitHub —Ä–µ–ø–æ –∏—Å–ø–æ–ª—å–∑—É—è deploy key
        
        N->>GH: –°–∫–∞—á–∏–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        Note right of GH: Netlify –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤–æ–º—É –∫–æ–º–º–∏—Ç—É —á–µ—Ä–µ–∑ deploy key
        
        N->>N: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–π—Ç–∞
        Note right of N: pnpm install && pnpm build —Å–æ–∑–¥–∞–µ—Ç production –≤–µ—Ä—Å–∏—é
        Note right of N: üîê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ env_file_change
        Note right of N: ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ (NODE_ENV API_KEY –∏ –¥—Ä.)
        
        alt –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
            N->>N: –î–µ–ø–ª–æ–∏—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ CDN
            Note right of N: –ü—É–±–ª–∏–∫—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–∞–π—Ç–∞
            
            N->>WS: POST /webhooks/netlify —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± —É—Å–ø–µ—à–Ω–æ–º –¥–µ–ø–ª–æ–µ
            Note right of N: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –æ —Å—Ç–∞—Ç—É—Å–µ –¥–µ–ø–ª–æ—è –ò —Ñ–∏–Ω–∞–ª—å–Ω–æ–º URL —Å–∞–π—Ç–∞
            
            WS->>DB: ProjectQueries.updateProject —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç deploy_status ready + netlify_url
            Note right of DB: –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è –ò –°–û–•–†–ê–ù–Ø–ï–¢ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –≤ –ø–µ—Ä–≤—ã–π —Ä–∞–∑
            
            WS->>W: io.to projectId emit deploy_status_update —É–≤–µ–¥–æ–º–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç toolbar
            Note right of W: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–µ–ª–µ–Ω—ã–π —Å—Ç–∞—Ç—É—Å "Deployed successfully"
            Note right of T: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–ø–ª–æ—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            
        else –°–±–æ—Ä–∫–∞ –Ω–µ—É–¥–∞—á–Ω–∞
            N->>WS: POST /webhooks/netlify —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –æ—à–∏–±–∫–µ —Å–±–æ—Ä–∫–∏
            Note right of N: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –∏ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏
            
            WS->>DB: ProjectQueries.updateProject —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç deploy_status failed
            Note right of DB: –ü–æ–º–µ—á–∞–µ—Ç –¥–µ–ø–ª–æ–π –∫–∞–∫ –Ω–µ—É–¥–∞—á–Ω—ã–π
            
            WS->>W: io.to projectId emit deploy_status_update —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–± –æ—à–∏–±–∫–µ
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update —Å —Å—Ç–∞—Ç—É—Å–æ–º –æ—à–∏–±–∫–∏
            Note right of W: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
            Note right of T: –ö—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–∫–∏ –≤ toolbar
        end
    end

    %% === 7. UNIFIED OVERVIEW AND REAL-TIME UPDATES ===
    rect rgb(248, 248, 255)
        Note over U,W: 7Ô∏è‚É£ –ï–î–ò–ù–´–ô –û–ë–ó–û–† - –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
        
        U->>W: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –µ–¥–∏–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É Overview –ø—Ä–æ–µ–∫—Ç–∞
        Note right of W: GET /project/projectId/overview - –æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
        
        W->>DB: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å—Ç–æ—Ä–∏—é –∏ pending changes
        Note right of DB: –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebSocket —Å–æ—Å—Ç–æ—è–Ω–∏—è
        DB-->>W: –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ pending changes —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–µ–∫—Ç–∞
        
        W-->>U: –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç Overview —Å –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –∫–æ–º–º–∏—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        Note right of U: –í–°–ï –∫–æ–º–º–∏—Ç—ã –ø–æ–∫–∞–∑–∞–Ω—ã –≤ Overview, –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5
        Note right of U: –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ WebSocket –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è—Ö
        Note right of U: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ
        Note right of U: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: Agent Status Deploy Status Last Updated
        Note right of U: Sidebar –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π Save All –∏ Discard All
        
        alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
            C->>WS: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ file_change –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
            WS->>W: WebSocket —Å–æ–±—ã—Ç–∏–µ file_change_staged –æ–±–Ω–æ–≤–ª—è–µ—Ç Pending Changes
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ pending_changes_updated –æ–±–Ω–æ–≤–ª—è–µ—Ç toolbar
            Note right of W: UI –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ pending changes
            Note right of T: –°—á–µ—Ç—á–∏–∫ toolbar –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            
            U->>W: –ù–∞–∂–∏–º–∞–µ—Ç "Save All Changes" –≤ Overview sidebar
            WS->>GH: –°–æ–∑–¥–∞–µ—Ç GitHub –∫–æ–º–º–∏—Ç —á–µ—Ä–µ–∑ save_all_changes
            WS->>W: WebSocket —Å–æ–±—ã—Ç–∏–µ commit_created —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∫–æ–º–º–∏—Ç–∞
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ save_completed –æ–±–Ω–æ–≤–ª—è–µ—Ç toolbar
            Note right of W: –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –≤ Overview –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
            Note right of W: –ù–æ–≤—ã–π –∫–æ–º–º–∏—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –ë–ï–ó –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            Note right of T: –°—á–µ—Ç—á–∏–∫ toolbar —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—Ö
            
            WS->>N: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
            WS->>W: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è
            WS->>T: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å toolbar
            Note right of W: Deploy Status –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            Note right of T: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–µ–ø–ª–æ—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
        end
        
        U->>W: –ö–ª–∏–∫ –ø–æ –∫–æ–º–º–∏—Ç—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤
        Note right of W: –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –∫–æ–º–º–∏—Ç–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
        
        U->>W: –ö–ª–∏–∫ –∫–Ω–æ–ø–∫–∏ "Open Live Site"
        Note right of W: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Netlify URL –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞
        
        U->>W: –ö–ª–∏–∫ –∫–Ω–æ–ø–∫–∏ "View on GitHub"
        Note right of W: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π phion-project-{id}
        W-->>U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–æ –ù–ï –ú–û–ñ–ï–¢ –ø—É—à–∏—Ç—å –≤ –Ω–µ–≥–æ
        Note right of U: –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ GitHub –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        
        alt VS Code Extension Preview –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
            U->>V: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç VS Code Extension –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è preview
            V->>V: Extension –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É phion.openPreview
            Note right of V: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç localhost:5173 –≤ VS Code Simple Browser
            Note right of V: –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç layout workspace –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            V->>V: –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å phion.fixConnection –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ—Ä—Ç–æ–≤
        end
    end

    %% === 8. PROJECT DELETION ===
    rect rgb(255, 235, 235)
        Note over U,N: 8Ô∏è‚É£ –ü–û–õ–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï –ü–†–û–ï–ö–¢–ê - –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
        
        U->>W: –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "Delete Project"
        Note right of W: GET /project/projectId/settings –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫—Ä–∞—Å–Ω—É—é Danger Zone —Å –∫–Ω–æ–ø–∫–æ–π —É–¥–∞–ª–µ–Ω–∏—è
        
        U->>W: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        Note right of U: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
        
        W->>W: DELETE /api/projects/projectId –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —É–¥–∞–ª–µ–Ω–∏—è
        Note right of W: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ RLS –≤ Supabase
        
        W->>DB: ProjectQueries.getProjectById –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
        Note right of DB: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å netlify_site_id github_repo_name –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
        DB-->>W: –ü—Ä–æ–µ–∫—Ç —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
        
        alt Netlify —Å–∞–π—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
            W->>N: DELETE /api/v1/sites/{netlify_site_id} —É–¥–∞–ª—è–µ—Ç Netlify —Å–∞–π—Ç
            Note right of N: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç NETLIFY_ACCESS_TOKEN –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            N->>N: –£–¥–∞–ª—è–µ—Ç –∂–∏–≤–æ–π —Å–∞–π—Ç DNS –∑–∞–ø–∏—Å–∏ CDN –∫–µ—à webhooks
            N-->>W: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ —Å–∞–π—Ç–∞ –∏–ª–∏ 404 –µ—Å–ª–∏ —É–∂–µ —É–¥–∞–ª–µ–Ω
            Note right of W: –õ–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ —Å–∞–π—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
        else –ù–µ—Ç Netlify —Å–∞–π—Ç–∞
            Note right of W: –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ Netlify —Ç–∞–∫ –∫–∞–∫ netlify_site_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        end
        
        alt GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
            W->>APP: –ó–∞–ø—Ä–æ—Å installation token –¥–ª—è GitHub App ID 1390062
            Note right of APP: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT –∏ –ø–æ–ª—É—á–∞–µ—Ç installation token –Ω–∞ 60 –º–∏–Ω—É—Ç
            APP-->>W: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç installation_token –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
            
            W->>GH: DELETE /repos/phion/{github_repo_name} —É–¥–∞–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
            Note right of GH: Authorization Bearer {installation_token}
            Note right of GH: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–∑ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
            GH->>GH: –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ issues PRs webhooks
            GH-->>W: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –∏–ª–∏ 404 –µ—Å–ª–∏ —Ä–µ–ø–æ –Ω–µ –Ω–∞–π–¥–µ–Ω
            Note right of W: –õ–æ–≥–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ —Ä–µ–ø–æ —É–∂–µ —É–¥–∞–ª–µ–Ω
        else –ù–µ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
            Note right of W: –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ GitHub —Ç–∞–∫ –∫–∞–∫ github_repo_name –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        end
        
        W->>DB: ProjectQueries.deleteProject —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        Note right of DB: DELETE FROM projects WHERE id = projectId AND user_id = auth.uid()
        
        DB->>DB: –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ foreign key constraints
        Note right of DB: AUTO DELETE FROM file_history WHERE project_id = projectId
        Note right of DB: AUTO DELETE FROM commit_history WHERE project_id = projectId
        Note right of DB: AUTO DELETE FROM pending_changes WHERE project_id = projectId
        
        DB-->>W: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        
        W-->>U: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        Note right of U: –ë—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ /dashboard
        
        alt –ï—Å–ª–∏ WebSocket –∞–≥–µ–Ω—Ç –±—ã–ª –ø–æ–¥–∫–ª—é—á–µ–Ω
            WS->>C: –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —É–¥–∞–ª–µ–Ω
            Note right of C: –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç —Ç–µ—Ä—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            
            C->>C: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç file watcher –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
            Note right of C: –ü—Ä–µ–∫—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
            
            C-->>U: –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "Project deleted remotely, connection closed"
            Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —É–¥–∞–ª–µ–Ω —É–¥–∞–ª–µ–Ω–Ω–æ
        end
    end

    %% === 9. ARCHITECTURE FEATURES ===
    rect rgb(230, 255, 230)
        Note over U,W: üîü –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò - –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
        
        Note over U,W: REAL-TIME –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
        Note right of W: WebSocket —Å–æ–±—ã—Ç–∏–µ commit_created –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
        Note right of W: WebSocket —Å–æ–±—ã—Ç–∏–µ file_change_staged –æ–±–Ω–æ–≤–ª—è–µ—Ç pending changes
        Note right of W: WebSocket —Å–æ–±—ã—Ç–∏–µ deploy_status_update –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è
        Note right of W: WebSocket —Å–æ–±—ã—Ç–∏–µ pending_changes_updated —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç toolbar
        Note right of W: HTTP polling –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω - —Ç–æ–ª—å–∫–æ WebSocket —Å–æ–±—ã—Ç–∏—è
        Note right of W: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        Note right of W: API endpoint /api/notify-status-change –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
        
        Note over U,W: NPM –î–ò–°–¢–†–ò–ë–£–¶–ò–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
        Note right of U: Toolbar —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ npm –ø–∞–∫–µ—Ç "phion" –Ω–µ —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        Note right of U: –ù–µ—Ç R2 Storage –¥–ª—è –≤–µ—Ä—Å–∏–π toolbar - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç toolbar –æ–±–Ω–æ–≤–ª—è—è npm –ø–∞–∫–µ—Ç: pnpm update phion
        Note right of U: Vite plugin –∏–∑ phion –ø–∞–∫–µ—Ç–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç toolbar –∏–∑ node_modules
        Note right of U: packages/dev-agent/src/plugin.ts –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é toolbar
        Note right of U: VS Code Extension –≤—Å—Ç—Ä–æ–µ–Ω –≤ template –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        
        Note over U,W: VS CODE –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
        Note right of V: –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ Extension: templates/vite-react/scripts/auto-browser-extension/
        Note right of V: –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Phion –ø—Ä–æ–µ–∫—Ç—ã —á–µ—Ä–µ–∑ –Ω–∞–ª–∏—á–∏–µ phion.config.json
        Note right of V: –ê–≤—Ç–æ-—Å—Ç–∞—Ä—Ç –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å pnpm start (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
        Note right of V: –ê–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç–∏–µ preview –≤ VS Code Simple Browser
        Note right of V: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è workspace: –∑–∞–∫—Ä—ã–≤–∞–µ—Ç sidebar, terminal, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç AI chat
        Note right of V: –ö–æ–º–∞–Ω–¥—ã: startProject, openPreview, fixConnection, resetProjectHistory
        Note right of V: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å vscode-utils.ts –¥–ª—è –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ VS Code/Cursor
        
        Note over U,W: ENV SYNC –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
        Note right of C: –û—Ç–¥–µ–ª—å–Ω—ã–π envWatcher –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ .env* —Ñ–∞–π–ª—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
        Note right of C: .env —Ñ–∞–π–ª—ã –ò–°–ö–õ–Æ–ß–ï–ù–´ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ file watcher –∏ git tracking
        Note right of WS: WebSocket —Å–æ–±—ã—Ç–∏—è: env_file_change env_file_delete env_sync_success/error
        Note right of WS: NetlifyService API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
        Note right of N: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å production context –∏ builds+functions scopes
        Note right of N: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º - –ù–ï —É–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        Note right of U: Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        Note right of U: .env –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–ø–∞–¥–∞—é—Ç –≤ Netlify –ë–ï–ó –∫–æ–º–º–∏—Ç–∞ –≤ GitHub
        Note right of U: –õ–æ–∫–∞–ª—å–Ω—ã–µ .env —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∏ –ù–ï –ø–æ–ø–∞–¥–∞—é—Ç –≤ git
        
        Note over U,W: –ö–õ–Æ–ß–ï–í–´–ï –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò
        Note right of U: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≥–∏–Ω–∏—Ç—Å—è –≤ GitHub
        Note right of U: –í—Å–µ GitHub –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π GitHub App
        Note right of U: –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ phion
        Note right of U: Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å deploy keys –¥–ª—è —á—Ç–µ–Ω–∏—è
        Note right of U: –ö–æ–º–º–∏—Ç –≤ main = —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ + –∞–≤—Ç–æ-–¥–µ–ø–ª–æ–π
        Note right of U: Staging area –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏—Ö
        Note right of U: –õ–æ–∫–∞–ª—å–Ω—ã–π git reset —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–∫–∞—Ç–∞
        Note right of U: –£–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
        Note right of U: Real-time UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        Note right of U: SERVERLESS-SAFE: –í—Å–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ Railway
        Note right of U: Next.js –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–µ HTTP –≤—ã–∑–æ–≤—ã –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É
        Note right of U: Railway –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç - —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è
        Note right of U: ENV SYNC: .env —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Netlify –ë–ï–ó –∫–æ–º–º–∏—Ç–æ–≤
        Note right of U: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å env: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ù–ï –ø–æ–ø–∞–¥–∞—é—Ç –≤ git –Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
        
        Note over U,W: –ù–ê–í–ò–ì–ê–¶–ò–Ø –ò UX
        Note right of U: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è - —Ç–æ–ª—å–∫–æ 2-3 —Ç–∞–±–∞ Overview Onboarding Settings
        Note right of U: –í—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ Overview
        Note right of U: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –≤–º–µ—Å—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ 5 –∑–∞–ø–∏—Å–µ–π
        Note right of U: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ onboarding –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è
        Note right of U: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
        Note right of U: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π toolbar –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä—è–º–æ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
        Note right of U: –ü–ª–∞–≤–∞—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –º–µ—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        Note right of U: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–π
        Note right of U: VS Code Extension –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        Note right of U: Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ .env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
        Note right of U: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è env —Ñ–∞–π–ª–æ–≤ –ë–ï–ó –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
    end 