sequenceDiagram
    participant U as ğŸ‘¤ User
    participant B as ğŸŒ Web App
    participant V as ğŸ’» Editor
    participant TB as ğŸ› ï¸ Toolbar
    participant WS as ğŸ”„ WebSocket
    participant DA as ğŸ“¡ Dev Agent
    participant DB as ğŸ—ƒï¸ Database
    participant R2 as â˜ï¸ R2 Storage
    participant GH as ğŸ™ GitHub
    participant N as ğŸ”¥ Netlify

    Note over U,N: ğŸš€ VYBCEL DETAILED ARCHITECTURE - ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹

    %% === 1. WEB APP (Next.js) ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ===
    rect rgb(240, 248, 255)
        Note over B: ğŸŒ WEB APP (Next.js) - ĞŸĞ¾Ñ€Ñ‚ 3004
        
        Note left of B: Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ¯
        Note left of B: â”œâ”€â”€ app/
        Note left of B: â”‚   â”œâ”€â”€ (auth)/ - ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
        Note left of B: â”‚   â”œâ”€â”€ dashboard/ - Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
        Note left of B: â”‚   â”œâ”€â”€ project/[id]/ - Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note left of B: â”‚   â”‚   â”œâ”€â”€ overview/ - ĞĞ±Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note left of B: â”‚   â”‚   â”œâ”€â”€ onboarding/ - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°
        Note left of B: â”‚   â”‚   â””â”€â”€ settings/ - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
        Note left of B: â”‚   â”œâ”€â”€ admin/ - ĞĞ´Ğ¼Ğ¸Ğ½ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
        Note left of B: â”‚   â””â”€â”€ api/ - API ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹
        Note left of B: â”œâ”€â”€ components/
        Note left of B: â”‚   â”œâ”€â”€ ui/ - shadcn/ui ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
        Note left of B: â”‚   â”œâ”€â”€ project/ - ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note left of B: â”‚   â””â”€â”€ layout/ - ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¼Ğ°ĞºĞµÑ‚Ğ°
        Note left of B: â””â”€â”€ lib/ - Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ¸ Ñ…ÑƒĞºĞ¸

        Note right of B: API ROUTES Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ
        Note right of B: /api/projects/ - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ğ¼Ğ¸
        Note right of B: â”‚ â”œâ”€â”€ POST / - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note right of B: â”‚ â”œâ”€â”€ GET /[id] - ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note right of B: â”‚ â”œâ”€â”€ DELETE /[id] - Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note right of B: â”‚ â””â”€â”€ GET /[id]/download - Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ
        Note right of B: /api/toolbar/ - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ toolbar
        Note right of B: â”‚ â”œâ”€â”€ GET /check - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
        Note right of B: â”‚ â”œâ”€â”€ POST /upload - Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ²ĞµÑ€ÑĞ¸Ğ¹
        Note right of B: â”‚ â””â”€â”€ POST /broadcast - Ğ Ğ°ÑÑÑ‹Ğ»ĞºĞ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
        Note right of B: /api/webhooks/ - Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ²ĞµĞ±Ñ…ÑƒĞºĞ¸
        Note right of B: â”‚ â”œâ”€â”€ POST /netlify - Netlify ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
        Note right of B: â”‚ â””â”€â”€ POST /github - GitHub ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

        Note over B: ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ« Ğ˜ Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ•
        Note over B: - ProjectProvider (ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
        Note over B: - WebSocketProvider (WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ)
        Note over B: - ThemeProvider (Ñ‚ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)
        Note over B: - TanStack Query (ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
        Note over B: - Zustand/useState (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ)
        
        alt ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
            U->>B: POST /api/projects
            B->>DB: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
            B->>WS: Ğ’Ñ‹Ğ·Ğ¾Ğ² ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ GitHub Ñ€ĞµĞ¿Ğ¾
            B-->>U: Redirect Ğ½Ğ° onboarding
        end
        
        alt Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
            WS->>B: WebSocket ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
            B->>B: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
            B-->>U: UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ Ğ±ĞµĞ· reload
        end
    end

    %% === 2. WEBSOCKET SERVER ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ===
    rect rgb(245, 255, 245)
        Note over WS: ğŸ”„ WEBSOCKET SERVER (Express + Socket.IO) - ĞŸĞ¾Ñ€Ñ‚ 8080
        
        Note left of WS: Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ•Ğ Ğ’Ğ•Ğ Ğ
        Note left of WS: â”œâ”€â”€ src/
        Note left of WS: â”‚   â”œâ”€â”€ index.ts - Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» ÑĞµÑ€Ğ²ĞµÑ€Ğ°
        Note left of WS: â”‚   â”œâ”€â”€ services/
        Note left of WS: â”‚   â”‚   â”œâ”€â”€ github.ts - GitHub Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
        Note left of WS: â”‚   â”‚   â”œâ”€â”€ netlify.ts - Netlify Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
        Note left of WS: â”‚   â”‚   â””â”€â”€ project.ts - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ğ¼Ğ¸
        Note left of WS: â”‚   â”œâ”€â”€ handlers/
        Note left of WS: â”‚   â”‚   â”œâ”€â”€ auth.ts - ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
        Note left of WS: â”‚   â”‚   â”œâ”€â”€ files.ts - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
        Note left of WS: â”‚   â”‚   â””â”€â”€ commits.ts - Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ°Ğ¼Ğ¸
        Note left of WS: â”‚   â””â”€â”€ utils/
        Note left of WS: â”‚       â”œâ”€â”€ git.ts - Git Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
        Note left of WS: â”‚       â””â”€â”€ validation.ts - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ

        Note right of WS: WEBSOCKET Ğ¡ĞĞ‘Ğ«Ğ¢Ğ˜Ğ¯
        Note right of WS: Ğ’Ğ¥ĞĞ”Ğ¯Ğ©Ğ˜Ğ• Ğ¡ĞĞ‘Ğ«Ğ¢Ğ˜Ğ¯:
        Note right of WS: â”œâ”€â”€ authenticate - ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
        Note right of WS: â”œâ”€â”€ file_change - Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°
        Note right of WS: â”œâ”€â”€ save_all_changes - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
        Note right of WS: â”œâ”€â”€ discard_all_changes - ĞÑ‚Ğ¼ĞµĞ½Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
        Note right of WS: â””â”€â”€ toolbar_connected - ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ toolbar
        Note right of WS: Ğ˜Ğ¡Ğ¥ĞĞ”Ğ¯Ğ©Ğ˜Ğ• Ğ¡ĞĞ‘Ğ«Ğ¢Ğ˜Ğ¯:
        Note right of WS: â”œâ”€â”€ authenticated - ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
        Note right of WS: â”œâ”€â”€ file_change_staged - Ğ¤Ğ°Ğ¹Ğ» Ğ² staging
        Note right of WS: â”œâ”€â”€ commit_created - ĞšĞ¾Ğ¼Ğ¼Ğ¸Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
        Note right of WS: â”œâ”€â”€ deploy_status_update - Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
        Note right of WS: â””â”€â”€ toolbar_update_available - ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ toolbar

        Note over WS: ĞšĞĞœĞĞĞ¢Ğ« Ğ˜ Ğ¡ĞĞ•Ğ”Ğ˜ĞĞ•ĞĞ˜Ğ¯
        Note over WS: - project_{projectId} - ĞšĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note over WS: - admin_toolbar - ĞĞ´Ğ¼Ğ¸Ğ½ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ°
        Note over WS: - connectedAgents Map - ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹
        Note over WS: - Memory store Ğ´Ğ»Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹

        alt Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ GitHub Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
            B->>WS: POST /api/projects/create-repository
            WS->>GH: GitHub App API
            WS->>DB: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ€ĞµĞ¿Ğ¾
            WS-->>B: Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
        end
        
        alt ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
            DA->>WS: WebSocket file_change
            WS->>DB: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² pending_changes
            WS->>B: Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
        end
        
        alt Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ°
            B->>WS: save_all_changes
            WS->>GH: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ°
            WS->>DB: ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° pending_changes
            WS->>N: Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ Ğ°Ğ²Ñ‚Ğ¾Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
        end
    end

    %% === 3. DEV AGENT ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ===
    rect rgb(255, 250, 240)
        Note over DA: ğŸ“¡ DEV AGENT (Node.js) - Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚
        
        Note left of DA: Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞĞ“Ğ•ĞĞ¢Ğ
        Note left of DA: â”œâ”€â”€ src/
        Note left of DA: â”‚   â”œâ”€â”€ index.ts - Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
        Note left of DA: â”‚   â”œâ”€â”€ watcher.ts - File watcher (chokidar)
        Note left of DA: â”‚   â”œâ”€â”€ websocket.ts - WebSocket ĞºĞ»Ğ¸ĞµĞ½Ñ‚
        Note left of DA: â”‚   â”œâ”€â”€ git.ts - Git Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
        Note left of DA: â”‚   â””â”€â”€ config.ts - ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
        Note left of DA: â”œâ”€â”€ vybcel.config.json - ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note left of DA: â””â”€â”€ package.json - NPM ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹

        Note right of DA: ĞĞ¡ĞĞĞ’ĞĞ«Ğ• Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜
        Note right of DA: â”œâ”€â”€ File Watching - chokidar ÑĞ»ĞµĞ´Ğ¸Ñ‚ Ğ·Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸
        Note right of DA: â”œâ”€â”€ WebSocket Client - ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼
        Note right of DA: â”œâ”€â”€ Git Integration - Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ git Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
        Note right of DA: â”œâ”€â”€ Auto Reconnection - Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ ÑĞ±Ğ¾ÑÑ…
        Note right of DA: â””â”€â”€ Project Detection - Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ PROJECT_ID

        Note over DA: Ğ–Ğ˜Ğ—ĞĞ•ĞĞĞ«Ğ™ Ğ¦Ğ˜ĞšĞ› ĞĞ“Ğ•ĞĞ¢Ğ
        Note over DA: 1. Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ vybcel.config.json
        Note over DA: 2. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº WebSocket ÑĞµÑ€Ğ²ĞµÑ€Ñƒ
        Note over DA: 3. ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ PROJECT_ID
        Note over DA: 4. Ğ—Ğ°Ğ¿ÑƒÑĞº file watcher Ğ½Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
        Note over DA: 5. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ Ğ² real-time

        alt Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
            U->>DA: pnpm sync
            DA->>DA: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
            DA->>WS: WebSocket Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
            DA->>DA: Ğ—Ğ°Ğ¿ÑƒÑĞº file watcher
        end
        
        alt Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°
            V->>DA: Ğ¤Ğ°Ğ¹Ğ» ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½ (chokidar event)
            DA->>DA: Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ°
            DA->>WS: WebSocket file_change
        end
        
        alt Git Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
            WS->>DA: discard_local_changes
            DA->>DA: git reset --hard HEAD
            DA->>WS: ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
        end
    end

    %% === 4. DATABASE (Supabase) ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ===
    rect rgb(250, 240, 255)
        Note over DB: ğŸ—ƒï¸ DATABASE (Supabase PostgreSQL)
        
        Note left of DB: Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ« Ğ˜ Ğ¡Ğ¥Ğ•ĞœĞ
        Note left of DB: â”œâ”€â”€ auth.users - ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ (Supabase Auth)
        Note left of DB: â”œâ”€â”€ public.projects - ĞŸÑ€Ğ¾ĞµĞºÑ‚Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
        Note left of DB: â”‚   â”œâ”€â”€ id (uuid, primary)
        Note left of DB: â”‚   â”œâ”€â”€ user_id (uuid, foreign)
        Note left of DB: â”‚   â”œâ”€â”€ name, description
        Note left of DB: â”‚   â”œâ”€â”€ github_repo_url, github_repo_name
        Note left of DB: â”‚   â”œâ”€â”€ netlify_site_id, netlify_url
        Note left of DB: â”‚   â””â”€â”€ deploy_status, created_at
        Note left of DB: â”œâ”€â”€ public.file_history - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
        Note left of DB: â”œâ”€â”€ public.commit_history - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ²
        Note left of DB: â””â”€â”€ public.pending_changes - Staging area

        Note right of DB: ROW LEVEL SECURITY (RLS)
        Note right of DB: â”œâ”€â”€ projects - Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¿Ğ¾ user_id
        Note right of DB: â”œâ”€â”€ file_history - Ğ§ĞµÑ€ĞµĞ· project ownership
        Note right of DB: â”œâ”€â”€ commit_history - Ğ§ĞµÑ€ĞµĞ· project ownership
        Note right of DB: â””â”€â”€ pending_changes - Ğ§ĞµÑ€ĞµĞ· project ownership

        Note over DB: QUERIES Ğ˜ ĞĞŸĞ•Ğ ĞĞ¦Ğ˜Ğ˜
        Note over DB: â”œâ”€â”€ ProjectQueries.ts - CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²
        Note over DB: â”œâ”€â”€ FileHistoryQueries.ts - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
        Note over DB: â”œâ”€â”€ CommitHistoryQueries.ts - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ²
        Note over DB: â””â”€â”€ PendingChangesQueries.ts - Staging operations

        alt Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
            B->>DB: ProjectQueries.createProject
            DB->>DB: INSERT INTO projects
            DB-->>B: ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ñ ID
        end
        
        alt Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
            WS->>DB: PendingChangesQueries.upsertPendingChange
            DB->>DB: UPSERT INTO pending_changes
        end
        
        alt Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ°
            WS->>DB: CommitHistoryQueries.createCommitHistory
            DB->>DB: INSERT INTO commit_history
            WS->>DB: PendingChangesQueries.clearAllPendingChanges
            DB->>DB: DELETE FROM pending_changes
        end
    end

    %% === 5. STORAGE (Cloudflare R2) ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ===
    rect rgb(255, 245, 250)
        Note over R2: â˜ï¸ STORAGE (Cloudflare R2)
        
        Note left of R2: Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ¥Ğ ĞĞĞ˜Ğ›Ğ˜Ğ©Ğ
        Note left of R2: â”œâ”€â”€ toolbar-versions/ - Ğ’ĞµÑ€ÑĞ¸Ğ¸ toolbar
        Note left of R2: â”‚   â”œâ”€â”€ {version}/
        Note left of R2: â”‚   â”‚   â”œâ”€â”€ stable/
        Note left of R2: â”‚   â”‚   â”œâ”€â”€ beta/
        Note left of R2: â”‚   â”‚   â””â”€â”€ dev/
        Note left of R2: â”‚   â”‚   â””â”€â”€ metadata.json - ĞœĞµÑ‚Ğ° Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
        Note left of R2: â”‚   â””â”€â”€ project-templates/ - Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²
        Note left of R2: â”‚   â””â”€â”€ vite-react/
        Note left of R2: â””â”€â”€ project-files/ - Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ² (Ñ€ĞµĞ·ĞµÑ€Ğ²)

        Note right of R2: ĞĞŸĞ•Ğ ĞĞ¦Ğ˜Ğ˜ Ğ¡ R2
        Note right of R2: â”œâ”€â”€ PUT Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ - Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
        Note right of R2: â”œâ”€â”€ GET Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ - Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
        Note right of R2: â”œâ”€â”€ LIST Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ - Ğ›Ğ¸ÑÑ‚Ğ¸Ğ½Ğ³ Ğ²ĞµÑ€ÑĞ¸Ğ¹
        Note right of R2: â””â”€â”€ DELETE Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ - Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹

        Note over R2: TOOLBAR VERSION MANAGEMENT
        Note over R2: â”œâ”€â”€ Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (semver)
        Note over R2: â”œâ”€â”€ ĞšĞ°Ğ½Ğ°Ğ»Ñ‹ Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ (stable/beta/dev)
        Note over R2: â”œâ”€â”€ Checksum validation Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
        Note over R2: â””â”€â”€ Metadata Ñ release notes

        alt Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ toolbar
            B->>R2: R2ToolbarManager.uploadVersion
            R2->>R2: Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ZIP Ñ Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹
            R2->>R2: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ metadata.json
            R2-->>B: ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
        end
        
        alt ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
            TB->>R2: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° metadata.json
            R2-->>TB: Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ²ĞµÑ€ÑĞ¸ÑÑ…
            TB->>R2: Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸
            R2-->>TB: ZIP Ñ„Ğ°Ğ¹Ğ» Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
        end
    end

    %% === 6. TOOLBAR SYSTEM ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ===
    rect rgb(245, 245, 255)
        Note over TB: ğŸ› ï¸ TOOLBAR SYSTEM - ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
        
        Note left of TB: ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ« TOOLBAR
        Note left of TB: â”œâ”€â”€ vite-plugin-vybcel/ - Vite Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½
        Note left of TB: â”‚   â”œâ”€â”€ Ğ˜Ğ½Ğ¶ĞµĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ toolbar Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚
        Note left of TB: â”‚   â”œâ”€â”€ Hot Module Replacement
        Note left of TB: â”‚   â””â”€â”€ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
        Note left of TB: â”œâ”€â”€ toolbar-ui/ - React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
        Note left of TB: â”‚   â”œâ”€â”€ ToolbarContainer - Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€
        Note left of TB: â”‚   â”œâ”€â”€ StatusIndicator - Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
        Note left of TB: â”‚   â”œâ”€â”€ ActionButtons - ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
        Note left of TB: â”‚   â””â”€â”€ NotificationToast - Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
        Note left of TB: â””â”€â”€ toolbar-core/ - ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
        Note left of TB:     â”œâ”€â”€ UpdateManager - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ÑĞ¼Ğ¸
        Note left of TB:     â”œâ”€â”€ WebSocketClient - WS ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ
        Note left of TB:     â””â”€â”€ StateManager - Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ toolbar

        Note right of TB: Ğ¦Ğ˜ĞšĞ› ĞĞ‘ĞĞĞ’Ğ›Ğ•ĞĞ˜Ğ™
        Note right of TB: 1. ĞĞ²Ñ‚Ğ¾Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
        Note right of TB: 2. WebSocket push ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
        Note right of TB: 3. Ğ ÑƒÑ‡Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (Ctrl+Shift+U)
        Note right of TB: 4. Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
        Note right of TB: 5. Hot Module Replacement
        Note right of TB: 6. Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

        Note over TB: Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ Ğ¡ ĞŸĞ ĞĞ•ĞšĞ¢ĞĞœ
        Note over TB: â”œâ”€â”€ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Vite
        Note over TB: â”œâ”€â”€ ĞŸĞ»Ğ°Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ (Ğ½Ğµ Ğ¼ĞµÑˆĞ°ĞµÑ‚ ĞºĞ¾Ğ´Ñƒ)
        Note over TB: â”œâ”€â”€ Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
        Note over TB: â””â”€â”€ Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ĞµĞ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

        alt ĞĞ²Ñ‚Ğ¾Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
            TB->>TB: setInterval 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
            TB->>B: GET /api/toolbar/check
            B->>R2: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹
            R2-->>B: Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ²ĞµÑ€ÑĞ¸ÑÑ…
            B-->>TB: hasUpdate Ñ„Ğ»Ğ°Ğ³
            TB->>TB: ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞµÑĞ»Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾
        end
        
        alt WebSocket push Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
            B->>WS: POST /api/toolbar/broadcast
            WS->>TB: toolbar_update_available
            TB->>TB: ĞĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
            TB->>TB: Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
        end
    end

    %% === 7. EXTERNAL SERVICES Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ ===
    rect rgb(240, 255, 240)
        Note over GH,N: ğŸ”— EXTERNAL SERVICES - Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
        
        Note over GH: ğŸ™ GITHUB INTEGRATION
        Note left of GH: GitHub App "Vybcel Bot"
        Note left of GH: â”œâ”€â”€ App ID: 1390062
        Note left of GH: â”œâ”€â”€ Installation ID: 70719351
        Note left of GH: â”œâ”€â”€ Organization: vybcel
        Note left of GH: â””â”€â”€ Permissions: repo, contents, metadata
        
        Note over GH: GitHub API Operations:
        Note over GH: â”œâ”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ñ… Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸ĞµĞ²
        Note over GH: â”œâ”€â”€ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ñ‹Ğ¼ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
        Note over GH: â”œâ”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¾Ğ² Ğ¸ Ğ²ĞµÑ‚Ğ¾Ğº
        Note over GH: â””â”€â”€ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° webhooks

        Note over N: ğŸ”¥ NETLIFY INTEGRATION
        Note right of N: Netlify API Operations:
        Note right of N: â”œâ”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ°Ğ¹Ñ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾
        Note right of N: â”œâ”€â”€ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° GitHub Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
        Note right of N: â”œâ”€â”€ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ build settings
        Note right of N: â”œâ”€â”€ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ deploy keys
        Note right of N: â””â”€â”€ Webhook ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

        Note over N: ĞĞ²Ñ‚Ğ¾Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ:
        Note over N: 1. GitHub webhook â†’ Netlify
        Note over N: 2. Git clone Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¿Ğ¾
        Note over N: 3. pnpm install && pnpm build
        Note over N: 4. Deploy Ğ½Ğ° CDN
        Note over N: 5. Webhook Ğ² WebSocket ÑĞµÑ€Ğ²ĞµÑ€

        alt GitHub Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
            WS->>GH: GitHub App API
            GH->>GH: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ¾
            GH-->>WS: Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
        end
        
        alt Netlify Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹
            GH->>N: Webhook Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğµ
            N->>N: ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ build
            N->>WS: Webhook Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑĞµ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ
            WS->>B: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°
        end
    end

    %% === 8. Ğ”ĞĞĞĞ«Ğ• Ğ˜ ĞŸĞĞ¢ĞĞšĞ˜ ===
    rect rgb(248, 248, 248)
        Note over U,N: ğŸ“Š DATA FLOWS & INTEGRATIONS
        
        Note over U,N: ĞĞ¡ĞĞĞ’ĞĞ«Ğ• ĞŸĞĞ¢ĞĞšĞ˜ Ğ”ĞĞĞĞ«Ğ¥:
        Note over U,N: 1. User Actions â†’ Web App â†’ WebSocket â†’ External Services
        Note over U,N: 2. File Changes â†’ Dev Agent â†’ WebSocket â†’ Database
        Note over U,N: 3. Real-time Updates â†’ WebSocket â†’ Web App â†’ User
        Note over U,N: 4. Toolbar Updates â†’ R2 Storage â†’ Toolbar â†’ User
        Note over U,N: 5. Deploy Status â†’ Netlify â†’ WebSocket â†’ All Clients

        Note over U,N: Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬ Ğ˜ ĞĞ£Ğ¢Ğ•ĞĞ¢Ğ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯:
        Note over U,N: â”œâ”€â”€ Supabase RLS Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
        Note over U,N: â”œâ”€â”€ GitHub App Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ (Ğ±ĞµĞ· Ğ»Ğ¾Ğ³Ğ¸Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)
        Note over U,N: â”œâ”€â”€ JWT Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ´Ğ»Ñ WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
        Note over U,N: â”œâ”€â”€ Checksum validation Ğ´Ğ»Ñ toolbar Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
        Note over U,N: â””â”€â”€ CORS Ğ¸ rate limiting Ğ´Ğ»Ñ API

        Note over U,N: ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ Ğ£Ğ•ĞœĞĞ¡Ğ¢Ğ¬:
        Note over U,N: â”œâ”€â”€ WebSocket rooms Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ¾Ğ²
        Note over U,N: â”œâ”€â”€ Database connection pooling
        Note over U,N: â”œâ”€â”€ CDN Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
        Note over U,N: â”œâ”€â”€ Horizontal scaling WebSocket ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²
        Note over U,N: â””â”€â”€ R2 Ğ´Ğ»Ñ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
    end